{"version":3,"sources":["../../maltay/maltay.js","../../maltay/mal/types.js","../../maltay/mal/reader.js","../../maltay/mal/printer.js","../../maltay/extensions.js","utils/config.js","components/Out.js","utils/web3.js","utils/taylor.js","components/MalTayContract.js","views/TaylorEditor.js","App.js","serviceWorker.js","index.js"],"names":["ethers","require","utils","hexZeroPad","hexStripZeros","malReader","malTypes","u2b","value","toString","u2h","b2u","parseInt","b2h","h2u","x0","strip0x","substring","fidb","id","padStart","funcidb","name","binf","hex","nativef","nativeEnv","composed","composedf","map","cname","arities","funcs","i","bin","join","arity","arityb","mutable","unknown","index","typeid","listTypeId","len","list","function","array","struct","number","bytelike","enum","numberid","add","sub","mul","div","sdiv","mod","smod","exp","not","lt","gt","slt","sgt","eq","iszero","and","or","xor","byte","shl","shr","sar","addmod","mulmod","signextend","keccak256","call","callcode","delegatecall","staticcall","apply","lambda","getf","if","contig","concat","reduce","nth","first","rest","cons","concat2","vector","assoc","dissoc","get","keys","vals","seq","conj","symbol","keyword","count","do","throw","is_macro_call","macroexpand","atom","deref","meta","quote","quasiquote","prn","str","println","readline","Object","forEach","key","idb","idmask","idmaskhex","encoded","bodylenb","reverseNativeEnv","formatId","getnumberid","size","getbytesid","length","isFunction","sig","isLambda","isLambdaUnknown","isGetByName","funcArity","tableSig","offsets","aritydelta","encode","types","values","Error","t","type","isHexString","val","getboolid","decodeInner","data","isNumber","numberSize","result","isBytelike","bytelikeSize","isListType","listTypeSize","Array","_","partsig","module","exports","h2b","decode","decoded","push","expr2h","expression","defenv","ast","read_str","ast2h","parent","unkownMap","elem","defname","hexEncode","exprbody","exprlen","_symbol_Q","encodedName","action1body","action2body","lambdaBody","expr2s","inidata","expr2string","pos","accum","unknownList","sigu","isf","fname","hexDecode","res","uname","_obj_type","obj","_list_Q","_vector_Q","_hash_map_Q","_nil_Q","_true_Q","_false_Q","_atom_Q","_sequential_Q","lst","a","Symbol","this","_function_Q","isArray","__isvector__","hm","Atom","_assoc_BANG","arguments","ktoken","vtoken","atm","prototype","Function","clone","that","temp","_equal_Q","b","ota","k","_clone","new_obj","slice","hasOwnProperty","defineProperty","enumerable","writable","_number_Q","_string_Q","_symbol","_keyword","_keyword_Q","_function","Eval","Env","env","params","fn","__meta__","__ast__","__gen_env__","args","_ismacro_","_fn_Q","_macro_Q","_list","_vector","v","_hash_map","_dissoc_BANG","_atom","reader","Reader","tokens","position","tokenize","re","results","match","exec","read_list","start","end","token","next","peek","read_form","read_vector","read_hash_map","parseFloat","replace","c","read_atom","BlankException","msg","printer","console","log","_pr_str","print_readably","_r","ret","e","String","charCodeAt","j","hexes","back","code","fromCharCode","editorOpts","selectOnLineNumbers","minimap","enabled","wordWrap","wordWrapColumn","fontSize","Out","props","styles","errors","ScrollView","horizontal","scrollEnabled","scrollEventThrottle","nestedScrollEnabled","contentContainerStyle","width","style","flex","color","src","theme","collapsed","shouldCollapse","field","getWeb3","window","ethereum","web3Instance","Web3","enable","web3","currentProvider","getProvider","provider","providers","Web3Provider","signer","getSigner","DEFAULT_DEPLOYMENT","5777","contract1","root","3","addressKey","chainid","STORAGE_KEY_TAYLOR_ADDRESS","addAddress","address","addresses","getAddresses","localStorage","setItem","JSON","stringify","getItem","parse","transaction","to","sendTransaction","gasLimit","gasPrice","response","MalTayContract","state","rootAddress","rootFunctions","addrToBeRegistered","registered","onChangeAddress","bind","onChangeCurrentName","onAddressSave","onChangeRootAddress","onChangeRegisteredAddress","onRegister","setWeb3","getNetwork","chainId","setState","_taycall","_taysend","setContract","setRegistered","taycall","taysend","onRootChange","expr","maltay","raddr","newval","find","placeholder","label","onChangeText","small","light","onClick","picker","mode","backgroundColor","selectedValue","onValueChange","Item","paddingTop","Component","TaylorEditor","source","taylorUtils","getWindowDimensions","pageNumber","autocompile","onContentSizeChange","onTextChange","execute","encdata","force","includes","receipt","wait","status","wdims","Dimensions","rootDims","document","getElementById","getBoundingClientRect","height","editor","monaco","focus","noOfPages","minWidth","minHeight","getPageSize","editorStyles","consoleStyles","panelStyles","pagingEnabled","language","options","onChange","editorDidMount","top","left","opacity","App","Boolean","location","hostname","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"sHAAMA,EAASC,EAAQ,K,EACeD,EAAOE,MAAtBC,G,EAAfC,c,EAAeD,YACjBE,EAAYJ,EAAQ,KAEpBK,GADaL,EAAQ,KACVA,EAAQ,MACzBA,EAAQ,KAER,IAAMM,EAAM,SAAAC,GAAK,OAAIA,EAAMC,SAAS,IAC9BC,EAAM,SAAAF,GAAK,OAAIA,EAAMC,SAAS,KAC9BE,EAAM,SAAAH,GAAK,OAAII,SAASJ,EAAO,IAC/BK,EAAM,SAAAL,GAAK,OAAIE,EAAIC,EAAIH,KACvBM,EAAM,SAAAN,GAAK,OAAII,SAASJ,EAAO,KAE/BO,EAAK,SAAAP,GAAK,MAAI,KAAOA,GACrBQ,EAAU,SAAAR,GAAK,MAA8B,OAA1BA,EAAMS,UAAU,EAAG,GAAcT,EAAMS,UAAU,GAAKT,GAKzEU,EAAO,SAAAC,GAAE,OAAIZ,EAAIY,GAAIC,SAAS,GAAI,MAClCC,EAAU,SAAVA,EAAUC,GACZ,IAGIC,EAAMC,EAHJC,EAA0B,kBAATH,EAAoBI,EAAUJ,GAAQA,EAC7D,GAAIG,EAAQD,IAAK,OAAOC,EAGxB,GAAKA,EAAQE,SAEN,CACH,IAAMC,EAAYH,EAAQE,SAASE,KAAI,SAAAC,GAAK,OAAIT,EAAQS,MACxDP,EAAO,SAAAQ,GAAO,OAAIH,EAAUC,KAAI,SAACG,EAAOC,GAAR,MAAmC,kBAAdD,EAAME,IAAmBF,EAAME,IAAMF,EAAME,IAAIH,EAAQE,OAAKE,KAAK,KACtHX,EAAM,SAAAO,GAAO,OAAIH,EAAUC,KAAI,SAACG,EAAOC,GAAR,MAAmC,kBAAdD,EAAMR,IAAmBQ,EAAMR,IAAMQ,EAAMR,IAAIO,EAAQE,OAAKE,KAAK,UAJrHZ,EAAO,SAAAa,GAAK,MAAI,IATT,SAAAA,GAAK,OAAI7B,EAAI6B,GAAOhB,SAAS,EAAG,KASjBiB,CAAOD,GAASlB,EAAKO,EAAQN,KAAeM,EAAQa,QAR5C,IAAM,MAexC,GAAsB,OAAlBb,EAAQW,MAAgB,CACxB,IAAMF,EAAMX,EAAKE,EAAQW,OACzB,MAAO,CAAEF,MAAKV,IAAKX,EAAIqB,IAE3B,MAAO,CAAEA,IAAKX,EAAMC,IAAKA,GAAQ,SAAAY,GAAK,OAAIvB,EAAIU,EAAKa,OAEjDG,EAAU,SAAAC,GAGZ,OAFS3B,EAAI4B,EAAOF,QAAU,IAAInB,SAAS,GAAI,MAAMA,SAAS,EAAG,KACrDV,EAAI8B,GAAOpB,SAAS,EAAG,MAGjCsB,EAAa,SAAAC,GAAG,OAAI3B,EAAQb,EAAWY,EAAGF,EAC5C4B,EAAOG,KAAOrC,EAAI,GAAGa,SAAS,EAAG,KAAOuB,IACxC,KAEEF,EAAS,CACXI,SAAU,IACVC,MAAO,KACPC,OAAQ,MACRH,KAAM,OACNI,OAAQ,QACRC,SAAU,SACVC,KAAM,UACNX,QAAS,YAaPY,GATGT,EAAW,GAKP7B,EAAI,oCACRA,EAAI,oCASH,eANJsC,EAUI,cAIJzB,EAAY,CAEd0B,IAAc,CAAEd,SAAS,EAAOF,MAAO,GACvCiB,IAAc,CAAEf,SAAS,EAAOF,MAAO,GACvCkB,IAAc,CAAEhB,SAAS,EAAOF,MAAO,GACvCmB,IAAc,CAAEjB,SAAS,EAAOF,MAAO,GACvCoB,KAAc,CAAElB,SAAS,EAAOF,MAAO,GACvCqB,IAAc,CAAEnB,SAAS,EAAOF,MAAO,GACvCsB,KAAc,CAAEpB,SAAS,EAAOF,MAAO,GACvCuB,IAAc,CAAErB,SAAS,EAAOF,MAAO,GACvCwB,IAAc,CAAEtB,SAAS,EAAOF,MAAO,GACvCyB,GAAc,CAAEvB,SAAS,EAAOF,MAAO,GACvC0B,GAAc,CAAExB,SAAS,EAAOF,MAAO,GACvC2B,IAAc,CAAEzB,SAAS,EAAOF,MAAO,GACvC4B,IAAc,CAAE1B,SAAS,EAAOF,MAAO,GACvC6B,GAAc,CAAE3B,SAAS,EAAOF,MAAO,GACvC8B,OAAc,CAAE5B,SAAS,EAAOF,MAAO,GACvC+B,IAAc,CAAE7B,SAAS,EAAOF,MAAO,GACvCgC,GAAc,CAAE9B,SAAS,EAAOF,MAAO,GACvCiC,IAAc,CAAE/B,SAAS,EAAOF,MAAO,GACvCkC,KAAc,CAAEhC,SAAS,EAAOF,MAAO,GACvCmC,IAAc,CAAEjC,SAAS,EAAOF,MAAO,GACvCoC,IAAc,CAAElC,SAAS,EAAOF,MAAO,GACvCqC,IAAc,CAAEnC,SAAS,EAAOF,MAAO,GACvCsC,OAAc,CAAEpC,SAAS,EAAOF,MAAO,GACvCuC,OAAc,CAAErC,SAAS,EAAOF,MAAO,GACvCwC,WAAc,CAAEtC,SAAS,EAAOF,MAAO,GACvCyC,UAAc,CAAEvC,SAAS,EAAOF,MAAO,GACvC0C,KAAc,CAAExC,SAAS,EAAMF,MAAO,GACtC2C,SAAc,CAAEzC,SAAS,EAAMF,MAAO,GACtC4C,aAAc,CAAE1C,SAAS,EAAMF,MAAO,GACtC6C,WAAc,CAAE3C,SAAS,EAAOF,MAAO,GAGvCQ,KAAc,CAAEN,SAAS,EAAOF,MAAO,MACvC8C,MAAc,CAAE5C,SAAS,EAAOF,MAAO,MACvC+C,OAAc,CAAE7C,SAAS,EAAOF,MAAO,MACvC,MAAc,CAAEE,SAAS,EAAOF,MAAO,MACvC,OAAc,CAAEE,SAAS,EAAOF,MAAO,GACvCgD,KAAc,CAAE9C,SAAS,EAAOF,MAAO,MACvCiD,GAAc,CAAE/C,SAAS,EAAOF,MAAO,GACvCkD,OAAc,CAAEhD,SAAS,EAAOF,MAAO,GACvCmD,OAAc,CAAEjD,SAAS,EAAOF,MAAO,GACvCP,IAAc,CAAES,SAAS,EAAOF,MAAO,GACvCoD,OAAc,CAAElD,SAAS,EAAOF,MAAO,GACvCqD,IAAc,CAAEnD,SAAS,EAAOF,MAAO,GACvCsD,MAAc,CAAEpD,SAAS,EAAOF,MAAO,GACvCuD,KAAc,CAAErD,SAAS,EAAOF,MAAO,GACvC,SAAc,CAAEE,SAAS,EAAOF,MAAO,GACvC,QAAc,CAAEE,SAAS,EAAOF,MAAO,GACvC,SAAc,CAAEE,SAAS,EAAOF,MAAO,GACvC,OAAc,CAAEE,SAAS,EAAOF,MAAO,GAGvCwD,KAAc,CAAEtD,SAAS,EAAOF,MAAO,GACvCyD,QAAc,CAAEvD,SAAS,EAAOF,MAAO,MACvC,OAAc,CAAEE,SAAS,EAAOF,MAAO,GACvC,QAAc,CAAEE,SAAS,EAAOF,MAAO,GACvC0D,OAAc,CAAExD,SAAS,EAAOF,MAAO,MACvC,UAAc,CAAEE,SAAS,EAAOF,MAAO,GACvC,cAAc,CAAEE,SAAS,EAAOF,MAAO,GACvC,WAAc,CAAEE,SAAS,EAAOF,MAAO,MACvC,OAAc,CAAEE,SAAS,EAAOF,MAAO,GACvC2D,MAAc,CAAEzD,SAAS,EAAOF,MAAO,MACvC4D,OAAc,CAAE1D,SAAS,EAAOF,MAAO,GACvC6D,IAAc,CAAE3D,SAAS,EAAOF,MAAO,GACvC,YAAc,CAAEE,SAAS,EAAOF,MAAO,GACvC8D,KAAc,CAAE5D,SAAS,EAAOF,MAAO,GACvC+D,KAAc,CAAE7D,SAAS,EAAOF,MAAO,GACvC,MAAc,CAAEE,SAAS,EAAOF,MAAO,GACvC,UAAc,CAAEE,SAAS,EAAOF,MAAO,GACvC,UAAc,CAAEE,SAAS,EAAOF,MAAO,GACvCgE,IAAc,CAAE9D,SAAS,EAAOF,MAAO,GACvCiE,KAAc,CAAE/D,SAAS,EAAOF,MAAO,GACvCkE,OAAc,CAAEhE,SAAS,EAAOF,MAAO,GACvC,UAAc,CAAEE,SAAS,EAAOF,MAAO,GACvCmE,QAAc,CAAEjE,SAAS,EAAOF,MAAO,GACvC,WAAc,CAAEE,SAAS,EAAOF,MAAO,GACvCoE,MAAc,CAAElE,SAAS,EAAOF,MAAO,GACvCqE,GAAc,CAAEnE,SAAS,EAAOF,MAAO,GACvC,OAAc,CAAEE,SAAS,EAAOF,MAAO,GACvC,SAAc,CAAEE,SAAS,EAAOF,MAAO,GACvCsE,MAAc,CAAEpE,SAAS,EAAOF,MAAO,GACvC,YAAc,CAAEE,SAAS,EAAOF,MAAO,GACvCuE,cAAc,CAAErE,SAAS,EAAOF,MAAO,GACvCwE,YAAc,CAAEtE,SAAS,EAAOF,MAAO,GACvCyE,KAAc,CAAEvE,SAAS,EAAOF,MAAO,GACvC,QAAc,CAAEE,SAAS,EAAOF,MAAO,GACvC0E,MAAc,CAAExE,SAAS,EAAOF,MAAO,GACvC,QAAc,CAAEE,SAAS,EAAOF,MAAO,MACvC,SAAc,CAAEE,SAAS,EAAOF,MAAO,GACvC,UAAc,CAAEE,SAAS,EAAOF,MAAO,GACvC2E,KAAc,CAAEzE,SAAS,EAAOF,MAAO,GACvC,YAAc,CAAEE,SAAS,EAAOF,MAAO,GACvC4E,MAAc,CAAE1E,SAAS,EAAOF,MAAO,MACvC6E,WAAc,CAAE3E,SAAS,EAAOF,MAAO,MACvC8E,IAAc,CAAE5E,SAAS,EAAOF,MAAO,MACvC,SAAc,CAAEE,SAAS,EAAOF,MAAO,MACvC+E,IAAc,CAAE7E,SAAS,EAAOF,MAAO,MACvCgF,QAAc,CAAE9E,SAAS,EAAOF,MAAO,MACvCiF,SAAc,CAAE/E,SAAS,EAAOF,MAAO,GAGvC,YAAc,CAAEE,SAAS,EAAOF,MAAO,GACvC,cAAiB,CAAEE,SAAS,EAAOF,MAAO,GAC1C,aAAc,CAAEE,SAAS,EAAOF,MAAO,IAM3CkF,OAAOpB,KAAKxE,GAAW6F,SAAQ,SAACC,EAAKrG,GACjCO,EAAU8F,GAAKrG,GAAKA,EAAK,EACzBO,EAAU8F,GAAKC,IAAMvG,EAAKQ,EAAU8F,GAAKrG,IACzCO,EAAU8F,GAAKE,OAAS,QAAUhG,EAAU8F,GAAKC,IAAM,IACvD/F,EAAU8F,GAAKG,UAAY9G,EAAIa,EAAU8F,GAAKE,QAJN,MAKnBrG,EAAQmG,GAArBtF,EALgC,EAKhCA,IAAKV,EAL2B,EAK3BA,IACbE,EAAU8F,GAAKI,QAAU1F,EACzBR,EAAU8F,GAAKhG,IAAMA,KAEzBE,EAAUyD,OAAOyC,QAAU,SAAAC,GAAQ,MAAI,SAAWtH,EAAIsH,EAAW,GAAGzG,SAAS,GAAI,KAAO,KACxFM,EAAUyD,OAAO3D,IAAM,SAAAqG,GAAQ,OAAIhH,EAAIa,EAAUyD,OAAOyC,QAAQC,KAIhE,IAAMC,EAAmB,GACzBR,OAAOpB,KAAKxE,GAAW6F,SAAQ,SAAAC,GACO,kBAAvB9F,EAAU8F,GAAKhG,MACtBsG,EAAiBpG,EAAU8F,GAAKhG,KAAOgG,MAK/C,IAAMO,EAAW,SAAA5G,GAAE,OAAIH,EAAQb,EAAWY,EAAGF,EAAIM,IAAM,KACjD6G,EAAc,SAAAC,GAAI,OAAIF,EAAStF,EAAOO,OAASG,EAAgB5C,EAAI0H,GAAM7G,SAAS,GAAI,OAEtF8G,EAAa,SAAAC,GAAM,OAAIJ,EAAStF,EAAOQ,SAAW1C,EAAI4H,GAAQ/G,SAAS,GAAI,OAE3EgH,EAAa,SAAAC,GAAG,OAA2B,KAAhB,WAANA,IACrBC,EAAW,SAAAD,GAAG,OAA0B,KAAf,SAANA,IAUnBE,EAAkB,SAAAF,GAAG,OAA0B,KAAf,SAANA,IAC1BG,EAAc,SAAAH,GAAG,OAA0B,MAAf,UAANA,IAKtBI,EAAY,SAAAJ,GAAG,OAAW,WAANA,IAAqB,IAKzCK,EAAW,GACjBA,EAAShH,EAAU,QAAQF,KAAO,CAACmH,QAAS,CAAC,GAAI,GAAIC,YAAa,GAClEF,EAAShH,EAAS,GAAOF,KAAO,CAACmH,QAAS,CAAC,EAAG,GAAIC,WAAY,GAC9DF,EAAQ,OAAa,CAACC,QAPD,SAAAN,GAAG,OAAW,SAANA,IAAoB,IAQjDK,EAAQ,YAAkB,CAACC,QAAS,CAAC,KAGrC,IAAME,EAAS,SAATA,EAAUC,EAAOC,GACnB,GAAID,EAAMX,SAAWY,EAAOZ,OAAQ,MAAM,IAAIa,MAAM,+BACrD,OAAOF,EAAMjH,KAAI,SAACoH,EAAGhH,GAChB,OAAQgH,EAAEC,MACN,IAAK,OACD,IAAM/H,EAAK6G,EAAYiB,EAAEhB,MACnBzH,EAAQI,SAASmI,EAAO9G,IAK9B,OAAOd,EAJQH,EAAQb,EACnBY,EAAGL,EAAIF,IACPyI,EAAEhB,OAGV,IAAK,QACD,IAAKjI,EAAOE,MAAMiJ,YAAYpI,EAAGgI,EAAO9G,KACpC,MAAM,IAAI+G,MAAM,0BAEpB,IAAMI,EAAMpI,EAAQ+H,EAAO9G,IACrBkG,EAASiB,EAAIjB,OAAS,EAC5B,OAAQD,EAAWC,GAAUiB,EACjC,IAAK,OACD,IAAIzG,EAAMpC,EAAIwI,EAAO9G,GAAGkG,QAAQ/G,SAAS,GAAI,KAG7C,OAFYsB,EAAWC,GAEVoG,EAAO9G,GAAGJ,KAAI,SAAArB,GAAK,OAAIqI,EAAO,CAAC,CAACK,KAAM,OAAQjB,KAAM,IAAK,CAACzH,OAClE2B,KAAK,IACd,IAAK,OACD,OA1DE,SAAA3B,GAAK,OAAIuH,EAAStF,EAAOO,OAASG,EAAgB5C,EAAIC,EAAQ,EAAI,GAAGY,SAAS,GAAI,MA0D7EiI,CAAUN,EAAO9G,IAC5B,QACI,MAAM,IAAI+G,MAAM,uBAEzB7G,KAAK,KAGNmH,EAAc,SAAdA,EAAejB,EAAKkB,GACtB,GAxDa,SAAAlB,GAAG,OAA0B,KAAf,UAANA,GAwDjBmB,CAASnB,GAAM,CACf,IAAMJ,EAlDK,SAAAI,GAAG,OAAU,MAANA,EAkDLoB,CAAWpB,GAGxB,OAFAqB,OAAS5I,EAAIyI,EAAKtI,UAAU,EAAQ,EAALgH,IAC/BsB,EAAOA,EAAKtI,UAAe,EAALgH,GACf,CAAEyB,cAAQH,QACd,GA3DQ,SAAAlB,GAAG,OAA0B,KAAf,SAANA,GA2DZsB,CAAWtB,GAAM,CACxB,IAAMF,EArDO,SAAAE,GAAG,OAAU,SAANA,EAqDLuB,CAAavB,GAG5B,OAFAqB,OAASH,EAAKtI,UAAU,EAAU,EAAPkH,GAC3BoB,EAAOA,EAAKtI,UAAiB,EAAPkH,GACf,CAAEuB,cAAQH,QACd,GAnEQ,SAAAlB,GAAG,OAA2B,KAAhB,UAANA,GAmEZwB,CAAWxB,GAAM,CACxB,IAAMF,EA3DO,SAAAE,GAAG,OAAU,SAANA,EA2DLyB,CAAazB,GAQ5B,MAAO,CAAEqB,OANM,EAAI,IAAIK,MAAM5B,IAAStG,KAAI,SAACmI,EAAG/H,GAC1C,IACIyH,EADEO,EAAUrJ,SAAS2I,EAAKtI,UAAU,EAAG,GAAI,IADC,EAG9BqI,EAAYW,EAASV,EAAKtI,UAAU,IACtD,OADEyI,EAH8C,EAG9CA,OAAQH,EAHsC,EAGtCA,KACHG,KAEMH,QAEjB,MAAM,IAAIP,MAAM,8BAAgCX,IA8MxD6B,EAAOC,QAAU,CACb5J,MAAKG,MAAKC,MAAKE,MAAKC,MAAKsJ,IApfjB,SAAA5J,GAAK,OAAID,EAAIO,EAAIN,KAqfzBiC,SAAQf,YACRmH,SACAwB,OA9MW,SAAAd,GACXA,EAAOvI,EAAQuI,GAGf,IAFA,IAAMe,EAAU,GAETf,EAAKpB,OAAS,GAAG,CACpB,IAAIuB,EACErB,EAAMzH,SAAS2I,EAAKtI,UAAU,EAAG,GAAI,IAFvB,EAGFqI,EAAYjB,EAAKkB,EAAKtI,UAAU,IAAhDyI,EAHkB,EAGlBA,OAAQH,EAHU,EAGVA,KACVe,EAAQC,KAAKb,GAEjB,OAAOY,GAqMPE,OA9FW,SAACC,EAAYC,GACxB,IAAMC,EAAMtK,EAAUuK,SAASH,GAC/B,OAAO1J,EAtGG,SAAR8J,EAASF,GAA8C,IAAzCG,EAAyC,uDAAlC,KAAMC,EAA4B,uDAAlB,GAAIL,EAAc,uDAAP,GAE5CtI,EAAQuI,EAAIxC,OAAS,EAE3B,GAAIwC,EAAI,IAAuB,SAAjBA,EAAI,GAAGnK,MAAkB,CACnC,IAAMwK,EAAOL,EAAI,GACXM,EAAUN,EAAI,GAAGnK,MAAM0K,YAAY9J,SAAS,GAAI,KAChD+J,EAAWN,EAAMF,EAAI,GAAIA,EAAKD,GAC9BU,EAAU1K,EAAIyK,EAAShD,OAAS,GAAG/G,SAAS,EAAG,KACrD,OAAOM,EAAUsJ,EAAKxK,OAAOgB,IAAMyJ,EAAUG,EAAUD,EAE3D,OAAOR,EAAI9I,KAAI,SAACmJ,EAAM/I,GAElB,GAAI3B,EAAS+K,UAAUL,GAAO,CAC1B,IAAKtJ,EAAUsJ,EAAKxK,OAAQ,CACxB,GAjUI,OAiUAwK,EAAKxK,MAEL,OADe0H,EAAWyC,EAAI1I,EAAI,GAAGkG,OAAS,GAC7BwC,EAAI1I,EAAI,GAK7B,IAAK8I,EAAUC,EAAKxK,QAA4B,MAAlBwK,EAAKxK,MAAM,GAAY,CAEjD,IAAM8K,EAActD,EAAY,IAAMgD,EAAKxK,MAAMS,UAAU,GAAGiK,YAAY9J,SAAS,GAAI,KAInFgB,EAAQuI,EAAI,GAAGnK,QAAUwK,EAAKxK,MAAQmK,EAAIxC,OAAS,EAEvD,OAAOzG,EAAU0D,KAAK5D,IAAIY,GAASkJ,EAKvC,OAAKP,EAAUC,EAAKxK,OAQbuK,EAAUC,EAAKxK,QAPlBuK,EAAUC,EAAKxK,OAAS+B,EAAQN,GAKzB,IAIf,GAAmB,OAAf+I,EAAKxK,MAAgB,CACrB,IAAM+K,EAAcV,EAAM,CAACF,EAAI,IAAK,KAAMD,GACpCc,EAAcX,EAAM,CAACF,EAAI,IAAK,KAAMD,GAC1C,OAAOhJ,EAAUsJ,EAAKxK,OAAOgB,IACvBd,EAAI6K,EAAYpD,OAAS,GAAG/G,SAAS,EAAG,KACxCV,EAAI8K,EAAYrD,OAAS,GAAG/G,SAAS,EAAG,KAKlD,GAAyC,kBAA9BM,EAAUsJ,EAAKxK,OAAOgB,IAC7B,OAAOE,EAAUsJ,EAAKxK,OAAOgB,IAEjC,GAAyC,oBAA9BE,EAAUsJ,EAAKxK,OAAOgB,IAC7B,MAAM,IAAIwH,MAAM,+BAAiCgC,EAAKxK,OAK1D,GAAmB,QAAfwK,EAAKxK,MAAiB,CACtB,IAAMiL,EAAaZ,EAAM,CAACF,EAAI,GAAIA,EAAI,IAAK,KAAMD,GAC7C9C,EAAUlG,EAAUyD,OAAO3D,IAAIiK,EAAWtD,QACxC/F,EAAQuI,EAAI,GAAGxC,OAQrB,OAJI2C,GAAUA,EAAO,GAAG,IAAMA,EAAO,GAAG,GAAGtK,QAAUwK,EAAKxK,QAEtDoH,EAAUlG,EAAUwD,MAAM1D,IAAIY,EAAQ,GAAKwF,GAExCA,EAGX,OAAOlG,EAAUsJ,EAAKxK,OAAOgB,IAAIY,GAGrC,OAAI4I,aAAgBjB,MACTc,EAAMG,EAAML,EAAKI,EAAWL,GAGnB,mBAATM,EACAnC,EAAO,CAAC,CAACK,KAAM,SAAU,CAAC8B,KAKhCpK,SAASoK,IAA4B,IAAnBpK,SAASoK,IACvBL,EAAI1I,EAAI,IA9YL,OA8YW0I,EAAI1I,EAAI,GAAGzB,WAFlC,EAIWqI,EAAO,CAAC,CAACK,KAAM,OAAQjB,KAAM,IAAK,CAAC+C,OAG/C7I,KAAK,IAKE0I,CAAMF,EAAK,KAAM,GAAID,KA6F/BrJ,UACAqK,OATW,SAAAC,GAAO,OAlFF,SAAdC,EAAeD,GAA6B,IAC1CrK,EAAMc,EADgByJ,EAAoB,uDAAhB,EAAGC,EAAa,uDAAP,GAEnCC,EAAc,GACdxC,EAAOoC,EAAQ1K,UAAU4K,GACvBxD,EAAMkB,EAAKtI,UAAU,EAAG,GACxB+K,EAAOpL,SAASyH,EAAK,IAC3BkB,EAAOA,EAAKtI,UAAU,GACtB4K,GAAO,EAEP,IAAMI,EAAM7D,EAAW4D,GAEvB,GAAIC,EAAK,CAOL,GANInE,EAAiBO,KAEjByD,GAAS,KADTxK,EAAQwG,EAAiBO,IACH,IACtBjG,EAAQqG,EAAUuD,IAGT,SAAT1K,EAAiB,CACjB,IAAM4K,EAAQ3C,EAAKtI,UAAU,EAAGyH,EAASL,GAAKM,QAAQ,IAAIwD,YAC1DL,GAAS,IAAMI,EAAMzL,WAAa,IAClC8I,EAAOA,EAAKtI,UAAUyH,EAASL,GAAKM,QAAQ,IAC5CkD,GAAOnD,EAASL,GAAKM,QAAQ,GAEbY,EAAKtI,UAAU,EAAGyH,EAASL,GAAKM,QAAQ,IACxDY,EAAOA,EAAKtI,UAAUyH,EAASL,GAAKM,QAAQ,IAG5C,IAAMyD,EAAMR,EAAYD,EAFxBE,GAAOnD,EAASL,GAAKM,QAAQ,GAESmD,GACtCD,EAAMO,EAAIP,IACVC,EAAQM,EAAIN,WACT,GAAa,OAATxK,EAAe,CACCV,SAAS2I,EAAKtI,UAAU,EAAGyH,EAASL,GAAKM,QAAQ,IAAK,IACtD/H,SAAS2I,EAAKtI,UAAU,EAAGyH,EAASL,GAAKM,QAAQ,IAAK,IAD7E,IAGIyD,EAAMR,EAAYD,EAASE,EAAMnD,EAASL,GAAKM,QAAQ,GAAKD,EAASL,GAAKM,QAAQ,GAAImD,GAI1FM,EAAMR,EAAYD,EAHlBE,EAAMO,EAAIP,IACVC,EAAQM,EAAIN,OAMZD,GADAO,EAAMR,EAAYD,EAFlBE,EAAMO,EAAIP,IACVC,EAAQM,EAAIN,QAEFD,IACVC,EAAQM,EAAIN,WAET,GAAIxD,EAAS0D,GAAO,CACvBF,GAAS,YACOpD,EAASvD,OAAOwD,QAAQqD,GAAxC,IACMI,EAAMR,EAAYD,EAASE,EAAKC,GACtCA,EAAQM,EAAIN,WACT,GAAItD,EAAYwD,GAAO,CAC1B,IAAME,EAAQ3C,EAAKtI,UAAU,EAAGyH,EAASF,YAAYG,QAAQ,GAAG,GAAGwD,YACnEL,GAAS,MAAQI,EAAQ,IAEzB,IAAME,EAAMR,EAAYD,EADxBE,GAAOnD,EAASF,YAAYG,QAAQ,GAAK,EACHmD,GACtCA,EAAQM,EAAIN,WAGZ,IAAI,IAAI7J,EAAI,EAAGA,EAAIG,EAAOH,IAAK,CAC3B,IAAImK,EAAMR,EAAYD,EAASE,EAAMC,GACrCD,EAAMO,EAAIP,IACVC,EAAQM,EAAIN,MAGpBA,GAAS,SAER,GAAIvD,EAAgByD,GAAO,CAC5B,IAAMxJ,EAAQ5B,SAAS2I,EAAKtI,UAAU,EAAG,GAAI,IACvCoL,EAAQ,KAAK7J,EAAQ,IAC3BuJ,EAAYxB,KAAK8B,GACjBP,GAAS,IAAMO,EACfR,GAAO,MAEN,CACD,IAAMO,EAAM9C,EAAY0C,EAAMzC,GAC9BuC,GAAS,IAAMM,EAAI1C,OAAOjJ,WAC1BoL,EAAMF,EAAQxD,OAASiE,EAAI7C,KAAKpB,OAEpC,MAAO,CAAE0D,MAAKC,SAGQF,CAAY5K,EAAQ2K,IAAUG,S,oBC5fxD,IAAIhD,EAAQ,GAOZ,SAASwD,EAAUC,GACf,GAASlB,EAAUkB,GAAU,MAAO,SAC/B,GAAIC,EAAQD,GAAY,MAAO,OAC/B,GAAIE,EAAUF,GAAU,MAAO,SAC/B,GAAIG,EAAYH,GAAQ,MAAO,WAC/B,GAAII,EAAOJ,GAAa,MAAO,MAC/B,GAAIK,EAAQL,GAAY,MAAO,OAC/B,GAAIM,EAASN,GAAW,MAAO,QAC/B,GAAIO,EAAQP,GAAY,MAAO,OAEhC,cAAeA,GACf,IAAK,SAAY,MAAO,SACxB,IAAK,WAAY,MAAO,WACxB,IAAK,SAAU,MAAiB,UAAVA,EAAI,GAAiB,UAAY,SACvD,QAAS,MAAM,IAAIvD,MAAM,wBAA0BuD,EAAO,MAKlE,SAASQ,EAAcC,GAAO,OAAOR,EAAQQ,IAAQP,EAAUO,GA4D/D,SAASL,EAAOM,GAAK,OAAa,OAANA,EAC5B,SAASL,EAAQK,GAAK,OAAa,IAANA,EAC7B,SAASJ,EAASI,GAAK,OAAa,IAANA,EAQ9B,SAASC,EAAO5L,GAEZ,OADA6L,KAAK3M,MAAQc,EACN6L,KAIX,SAAS9B,EAAUkB,GAAO,OAAOA,aAAeW,EA2BhD,SAASE,EAAYb,GAAO,MAAqB,mBAAPA,EAe1C,SAASC,EAAQD,GAAO,OAAOxC,MAAMsD,QAAQd,KAASA,EAAIe,aAS1D,SAASb,EAAUF,GAAO,OAAOxC,MAAMsD,QAAQd,MAAUA,EAAIe,aAY7D,SAASZ,EAAYa,GACjB,MAAqB,kBAAPA,IACNxD,MAAMsD,QAAQE,MACN,OAAPA,MACAA,aAAcL,MACdK,aAAcC,GAE3B,SAASC,EAAYF,GACjB,GAAIG,UAAUvF,OAAS,IAAM,EACzB,MAAM,IAAIa,MAAM,iCAEpB,IAAK,IAAI/G,EAAE,EAAGA,EAAEyL,UAAUvF,OAAQlG,GAAG,EAAG,CACpC,IAAI0L,EAASD,UAAUzL,GACnB2L,EAASF,UAAUzL,EAAE,GACzB,GAAsB,kBAAX0L,EACP,MAAM,IAAI3E,MAAM,6CAAgD2E,GAEpEJ,EAAGI,GAAUC,EAEjB,OAAOL,EAYX,SAASC,EAAKpE,GAAO+D,KAAK/D,IAAMA,EAEhC,SAAS0D,EAAQe,GAAO,OAAOA,aAAeL,EAlG9CN,EAAOY,UAAUrN,SAAW,WAAa,OAAO0M,KAAK3M,OA8BrDuN,SAASD,UAAUE,MAAQ,WACvB,IAAIC,EAAOd,KACPe,EAAO,WAAc,OAAOD,EAAK/I,MAAMiI,KAAMO,YACjD,IAAKlG,OAAO2F,KACRe,EAAK1G,KAAO2F,KAAK3F,KAErB,OAAO0G,GAkEX/D,EAAQmC,UAAYxD,EAAMwD,UAAYA,EACtCnC,EAAQ4C,cAAgBjE,EAAMiE,cAAgBA,EAC9C5C,EAAQgE,SAAWrF,EAAMqF,SA/KzB,SAASA,EAAUlB,EAAGmB,GAClB,IAAIC,EAAM/B,EAAUW,GACpB,KAAMoB,IADwB/B,EAAU8B,IAClBrB,EAAcE,IAAMF,EAAcqB,IACpD,OAAO,EAEX,OAAQC,GACR,IAAK,SAAU,OAAOpB,EAAEzM,QAAU4N,EAAE5N,MACpC,IAAK,OACL,IAAK,SACD,GAAIyM,EAAE9E,SAAWiG,EAAEjG,OAAU,OAAO,EACpC,IAAK,IAAIlG,EAAE,EAAGA,EAAEgL,EAAE9E,OAAQlG,IACtB,IAAMkM,EAASlB,EAAEhL,GAAImM,EAAEnM,IAAO,OAAO,EAEzC,OAAO,EACX,IAAK,WACD,GAAIqF,OAAOpB,KAAK+G,GAAG9E,SAAWb,OAAOpB,KAAKkI,GAAGjG,OAAU,OAAO,EAC9D,IAAK,IAAImG,KAAKrB,EACV,IAAMkB,EAASlB,EAAEqB,GAAIF,EAAEE,IAAO,OAAO,EAEzC,OAAO,EACX,QACI,OAAOrB,IAAMmB,IA2JrBjE,EAAQoE,OAASzF,EAAMyF,OAtJvB,SAAiBhC,GACb,IAAIiC,EACJ,OAAQlC,EAAUC,IAClB,IAAK,OACDiC,EAAUjC,EAAIkC,MAAM,GACpB,MACJ,IAAK,UACDD,EAAUjC,EAAIkC,MAAM,IACZnB,cAAe,EACvB,MACJ,IAAK,WAED,IAAK,IAAIgB,KADTE,EAAU,GACIjC,EACNA,EAAImC,eAAeJ,KAAME,EAAQF,GAAK/B,EAAI+B,IAElD,MACJ,IAAK,WACDE,EAAUjC,EAAIyB,QACd,MACJ,QACI,MAAM,IAAIhF,MAAM,4BAA8BsD,EAAUC,IAM5D,OAJAjF,OAAOqH,eAAeH,EAAS,WAAY,CACvCI,YAAY,EACZC,UAAU,IAEPL,GA6HXrE,EAAQwC,OAAS7D,EAAM6D,OAASA,EAChCxC,EAAQyC,QAAU9D,EAAM8D,QAAUA,EAClCzC,EAAQ0C,SAAW/D,EAAM+D,SAAWA,EACpC1C,EAAQ2E,UAAYhG,EAAMgG,UAxH1B,SAAmBvC,GAAO,MAAsB,kBAARA,GAyHxCpC,EAAQ4E,UAAYjG,EAAMiG,UAxH1B,SAAmBxC,GACf,MAAsB,kBAARA,GAA+B,WAAXA,EAAI,IAwH1CpC,EAAQ6E,QAAUlG,EAAMkG,QA9GxB,SAAiB1N,GAAQ,OAAO,IAAI4L,EAAO5L,IA+G3C6I,EAAQkB,UAAYvC,EAAMuC,UAAYA,EACtClB,EAAQ8E,SAAWnG,EAAMmG,SA3GzB,SAAkB1C,GACd,MAAmB,kBAARA,GAA+B,WAAXA,EAAI,GACxBA,EAEA,SAAWA,GAwG1BpC,EAAQ+E,WAAapG,EAAMoG,WArG3B,SAAoB3C,GAChB,MAAsB,kBAARA,GAA+B,WAAXA,EAAI,IAqG1CpC,EAAQgF,UAAYrG,EAAMqG,UAhG1B,SAAmBC,EAAMC,EAAK1E,EAAK2E,EAAKC,GACpC,IAAIC,EAAK,WACL,OAAOJ,EAAKzE,EAAK,IAAI0E,EAAIC,EAAKC,EAAQ7B,aAM1C,OAJA8B,EAAGC,SAAW,KACdD,EAAGE,QAAU/E,EACb6E,EAAGG,YAAc,SAASC,GAAQ,OAAO,IAAIP,EAAIC,EAAKC,EAAQK,IAC9DJ,EAAGK,WAAY,EACRL,GAyFXrF,EAAQiD,YAActE,EAAMsE,YAAcA,EAC1CjD,EAAQ2F,MAAQhH,EAAMgH,MA/EtB,SAAevD,GAAO,OAAOa,EAAYb,KAASA,EAAIsD,WAgFtD1F,EAAQ4F,SAAWjH,EAAMiH,SA/EzB,SAAkBxD,GAAO,OAAOa,EAAYb,MAAUA,EAAIsD,WAgF1D1F,EAAQ6F,MAAQlH,EAAMkH,MA5EtB,WAAmB,OAAOjG,MAAM+D,UAAUW,MAAM3J,KAAK4I,UAAW,IA6EhEvD,EAAQqC,QAAU1D,EAAM0D,QAAUA,EAClCrC,EAAQ8F,QAAUnH,EAAMmH,QAzExB,WACI,IAAIC,EAAInG,MAAM+D,UAAUW,MAAM3J,KAAK4I,UAAW,GAE9C,OADAwC,EAAE5C,cAAe,EACV4C,GAuEX/F,EAAQsC,UAAY3D,EAAM2D,UAAYA,EACtCtC,EAAQgG,UAAYrH,EAAMqH,UAjE1B,WACI,GAAIzC,UAAUvF,OAAS,IAAM,EACzB,MAAM,IAAIa,MAAM,oCAEpB,IAAI4G,EAAO,CAAC,IAAIrK,OAAOwE,MAAM+D,UAAUW,MAAM3J,KAAK4I,UAAW,IAC7D,OAAOD,EAAYvI,MAAM,KAAM0K,IA6DnCzF,EAAQuC,YAAc5D,EAAM4D,YAAcA,EAC1CvC,EAAQsD,YAAc3E,EAAM2E,YAAcA,EAC1CtD,EAAQiG,aAAetH,EAAMsH,aAxC7B,SAAsB7C,GAClB,IAAK,IAAItL,EAAE,EAAGA,EAAEyL,UAAUvF,OAAQlG,IAAK,CACnC,IAAI0L,EAASD,UAAUzL,UAChBsL,EAAGI,GAEd,OAAOJ,GAoCXpD,EAAQkG,MAAQvH,EAAMuH,MA9BtB,SAAejH,GAAO,OAAO,IAAIoE,EAAKpE,IA+BtCe,EAAQ2C,QAAUhE,EAAMgE,QAAUA,G,sGCpOlC,IAAIwD,EAAS,GAELxH,EAAQ7I,EAAQ,KAKxB,SAASsQ,EAAOC,GAEZrD,KAAKqD,OAASA,EAAO3O,KAAI,SAAUoL,GAAK,OAAOA,KAC/CE,KAAKsD,SAAW,EAKpB,SAASC,EAASvJ,GAGd,IAFA,IAAIwJ,EAAK,yEACLC,EAAU,GACsB,KAA5BC,MAAQF,EAAGG,KAAK3J,GAAK,KACR,MAAb0J,MAAM,IACVD,EAAQrG,KAAKsG,OAEjB,OAAOD,EA6BX,SAASG,EAAUT,EAAQU,EAAOC,GAC9BD,EAAQA,GAAS,IACjBC,EAAMA,GAAO,IACb,IAAItG,EAAM,GACNuG,EAAQZ,EAAOa,OACnB,GAAID,IAAUF,EACV,MAAM,IAAIhI,MAAM,aAAegI,EAAQ,KAE3C,MAAQE,EAAQZ,EAAOc,UAAYH,GAAK,CACpC,IAAKC,EACD,MAAM,IAAIlI,MAAM,aAAeiI,EAAM,cAEzCtG,EAAIJ,KAAK8G,EAAUf,IAGvB,OADAA,EAAOa,OACAxG,EAeX,SAAS0G,EAAUf,GAEf,OADYA,EAAOc,QAGnB,IAAK,IAAK,OAAO,KACjB,IAAK,IACM,OADAd,EAAOa,OACA,CAACrI,EAAMkG,QAAQ,SAAUqC,EAAUf,IACrD,IAAK,IACK,OADAA,EAAOa,OACA,CAACrI,EAAMkG,QAAQ,cAAeqC,EAAUf,IACzD,IAAK,IACK,OADAA,EAAOa,OACA,CAACrI,EAAMkG,QAAQ,WAAYqC,EAAUf,IACtD,IAAK,KACM,OADAA,EAAOa,OACA,CAACrI,EAAMkG,QAAQ,kBAAmBqC,EAAUf,IAC9D,IAAK,IAAKA,EAAOa,OACP,IAAIpK,EAAOsK,EAAUf,GACrB,MAAO,CAACxH,EAAMkG,QAAQ,aAAcqC,EAAUf,GAASvJ,GACjE,IAAK,IACK,OADAuJ,EAAOa,OACA,CAACrI,EAAMkG,QAAQ,SAAUqC,EAAUf,IAGpD,IAAK,IAAK,MAAM,IAAItH,MAAM,kBAC1B,IAAK,IAAK,OAAO+H,EAAUT,GAG3B,IAAK,IAAK,MAAM,IAAItH,MAAM,kBAC1B,IAAK,IAAK,OApCd,SAAqBsH,GACjB,IAAItD,EAAM+D,EAAUT,EAAQ,IAAK,KACjC,OAAOxH,EAAMmH,QAAQ/K,MAAM,KAAM8H,GAkChBsE,CAAYhB,GAG7B,IAAK,IAAK,MAAM,IAAItH,MAAM,kBAC1B,IAAK,IAAK,OAlCd,SAAuBsH,GACnB,IAAItD,EAAM+D,EAAUT,EAAQ,IAAK,KACjC,OAAOxH,EAAMqH,UAAUjL,MAAM,KAAM8H,GAgClBuE,CAAcjB,GAG/B,QAAU,OAxFd,SAAoBA,GAChB,IAAIY,EAAQZ,EAAOa,OAEnB,GAAID,EAAML,MAAM,cACZ,OAAOjQ,SAASsQ,EAAM,IACnB,GAAIA,EAAML,MAAM,oBACnB,OAAOW,WAAWN,EAAM,IACrB,GAAIA,EAAML,MAAM,uBACnB,OAAOK,EAAMzC,MAAM,EAAEyC,EAAM/I,OAAO,GAC7BsJ,QAAQ,UAAU,SAAUzH,EAAG0H,GAAK,MAAa,MAANA,EAAY,KAAOA,KAChE,GAAiB,MAAbR,EAAM,GACT,MAAM,IAAIlI,MAAM,0BACjB,MAAiB,MAAbkI,EAAM,GACNpI,EAAMmG,SAASiC,EAAMzC,MAAM,IACjB,QAAVyC,EACA,KACU,SAAVA,GAEU,UAAVA,GAGApI,EAAMkG,QAAQkC,GAmERS,CAAUrB,IAI/B,SAASsB,EAAeC,IAzGxBtB,EAAOzC,UAAUqD,KAAO,WAAa,OAAOhE,KAAKqD,OAAOrD,KAAKsD,aAC7DF,EAAOzC,UAAUsD,KAAO,WAAa,OAAOjE,KAAKqD,OAAOrD,KAAKsD,WAiH7DtG,EAAQoG,OAASD,EAAOC,OAASA,EACjCpG,EAAQyH,eAAiBtB,EAAOsB,eAAiBA,EACjDzH,EAAQuG,SAAWJ,EAAOI,SAAWA,EACrCvG,EAAQkH,UAAYf,EAAOe,UAAYA,EACvClH,EAAQS,SAAW0F,EAAO1F,SAV1B,SAAkBzD,GACd,IAAIqJ,EAASE,EAASvJ,GACtB,GAAsB,IAAlBqJ,EAAOrI,OAAgB,MAAM,IAAIyJ,EACrC,OAAOP,EAAU,IAAId,EAAOC,M,oBC3HhC,IAAIsB,EAAU,GAENhJ,EAAQ7I,EAAQ,KAEpB6R,EAAQ1K,QAAU+C,EAAQ/C,QAAU,WAChC2K,QAAQC,IAAI9M,MAAM6M,QAASrE,YA0CnCvD,EAAQ8H,QAAUH,EAAQG,QAtC1B,SAASA,EAAQ1F,EAAK2F,GACY,qBAAnBA,IAAkCA,GAAiB,GAC9D,IAAIC,EAAKD,EAET,OADSpJ,EAAMwD,UAAUC,IAEzB,IAAK,OAED,MAAO,KADH6F,EAAM7F,EAAI1K,KAAI,SAASwQ,GAAK,OAAOJ,EAAQI,EAAEF,OAChChQ,KAAK,KAAO,IACjC,IAAK,SAED,MAAO,KADHiQ,EAAM7F,EAAI1K,KAAI,SAASwQ,GAAK,OAAOJ,EAAQI,EAAEF,OAChChQ,KAAK,KAAO,IACjC,IAAK,WACD,IAAIiQ,EAAM,GACV,IAAK,IAAI9D,KAAK/B,EACV6F,EAAI7H,KAAK0H,EAAQ3D,EAAE6D,GAAKF,EAAQ1F,EAAI+B,GAAG6D,IAE3C,MAAO,IAAMC,EAAIjQ,KAAK,KAAO,IACjC,IAAK,SACD,MAAe,WAAXoK,EAAI,GACG,IAAMA,EAAIkC,MAAM,GAChB0D,EACA,IAAM5F,EAAIkF,QAAQ,MAAO,QAC3BA,QAAQ,KAAM,OACdA,QAAQ,MAAO,OAAS,IAEtBlF,EAEf,IAAK,UACD,MAAO,IAAMA,EAAIkC,MAAM,GAC3B,IAAK,MACD,MAAO,MACX,IAAK,OACD,MAAO,SAAWwD,EAAQ1F,EAAInD,IAAI+I,GAAM,IAC5C,QACI,OAAO5F,EAAI9L,c,kBC5CnB6R,OAAOxE,UAAU5C,UAAY,WACzB,IAASjJ,EAELyH,EAAS,GACb,IAAKzH,EAAE,EAAGA,EAAEkL,KAAKhF,OAAQlG,IAErByH,IAAW,MADLyD,KAAKoF,WAAWtQ,GAAGxB,SAAS,KACZgO,OAAO,GAGjC,OAAO/E,GAGX4I,OAAOxE,UAAU3B,UAAY,WACzB,IAAIqG,EACAC,EAAQtF,KAAK0D,MAAM,YAAc,GACjC6B,EAAO,GACX,IAAIF,EAAI,EAAGA,EAAEC,EAAMtK,OAAQqK,IAAK,CAC5B,IAAMG,EAAO/R,SAAS6R,EAAMD,GAAI,IACnB,IAATG,IACAD,GAAQJ,OAAOM,aAAaD,IAIpC,OAAOD,I,mNCvBLG,EAAa,CACjBC,qBAAqB,EACrBC,QAAS,CAACC,SAAS,GACnBC,SAAU,KACVC,eAAgB,GAChBC,SAAU,I,kBCqCGC,MApCf,SAAaC,GAAQ,IACVC,EAA0BD,EAA1BC,OAAQ5J,EAAkB2J,EAAlB3J,OAAQ6J,EAAUF,EAAVE,OACjBJ,EAAWN,EAAWM,SAE5B,OACA,kBAACK,EAAA,EAAD,CACIC,YAAY,EACZC,eAAe,EACfC,oBAAqB,IACrBC,qBAAqB,EACrBC,sBAAuB,CAACC,MAAOR,EAAOQ,OACtCC,MAAK,eAAOT,EAAP,CAAeU,KAAM,KAE1B,kBAACR,EAAA,EAAD,CACAC,YAAY,EACZC,eAAe,EACfC,oBAAqB,IACrBE,sBAAuB,CAACC,MAAOR,EAAOQ,OACtCC,MAAK,eAAOT,EAAP,CAAeU,KAAM,KAEzBT,EACK,kBAAC,OAAD,CAAMQ,MAAO,CAACE,MAAO,YAAad,aAAaI,GAC/C,kBAAC,IAAD,CACFW,IAAKxK,EACLpI,KAAK,SACL6S,MAAM,WACNC,UAAW,EACXC,eAAgB,SAAAC,GAAK,MAAmB,MAAfA,EAAMhT,MAC/ByS,MAAO,CAAEZ,iB,SChCfoB,EAAO,uCAAG,4BAAAtH,EAAA,0DAERuH,OAAOC,SAFC,wBAIRC,EAAe,IAAIC,KAAKF,UAJhB,kBAOEA,SAASG,SAPX,uDASJ7C,QAAQC,IAAI,iCATR,YAaP0C,GAAgBF,OAAOK,OAExBH,EAAe,IAAIC,KAAKE,KAAKC,kBAG5BJ,EAlBO,wBAmBR3C,QAAQC,IAAI,4DAnBJ,kBAoBD,MApBC,iCAsBL0C,GAtBK,yDAAH,qDAyBPK,EAAW,uCAAG,gCAAA9H,EAAA,sEACCsH,IADD,cACZM,EADY,OAEZG,EAAW,IAAIhV,SAAOiV,UAAUC,aAAaL,EAAKC,iBAClDK,EAASH,EAASI,UAAU,GAHhB,kBAIX,CAAEJ,WAAUG,WAJD,2CAAH,qDCvBXE,EAAqB,CACzBC,KAAM,CACJC,UAAW,6CACXC,KAAM,aAERC,EAAG,CACDF,UAAW,6CACXC,KAAM,cAiBJE,EAAa,SAAAC,GAAO,MAAIC,4BAAmCD,GAE3DE,EAAa,SAACF,EAASG,EAASxU,GACpC,IAAMkG,EAAMkO,EAAWC,GACjBI,EAAYC,EAAaL,GAC/BI,EAAUzU,GAAQwU,EAClBC,EAAUP,KAAOlU,EACjB2U,aAAaC,QAAQ1O,EAAK2O,KAAKC,UAAUL,KAGrCC,EAAe,SAACL,GACpB,IAAMnO,EAAMkO,EAAWC,GACnBI,EAAYE,aAAaI,QAAQ7O,GAOrC,OANIuO,EACFA,EAAYI,KAAKG,MAAMP,IAEvBA,EAAYV,EAAmBM,IAAY,GAC3CM,aAAaC,QAAQ1O,EAAK2O,KAAKC,UAAUL,KAEpCA,G,kBCzCHjR,EAAO,SAAAkQ,GAAQ,OAAI,SAAAc,GAAO,8CAAI,WAAMvM,GAAN,eAAA0D,EAAA,6DAC9BsJ,EAAc,CAChBC,GAAIV,EACJvM,QAHgC,SAKrByL,EAASlQ,KAAKyR,GALO,mFAAJ,wDAQ1BE,EAAkB,SAAAtB,GAAM,OAAI,SAAAW,GAAO,8CAAI,WAAMvM,GAAN,iBAAA0D,EAAA,6DACrCsJ,EAAc,CAClBhN,OACAmN,SAAU,IACVlW,MAAO,EACPgW,GAAIV,EACJa,SAAU,IAN+B,SAQpBxB,EAAOsB,gBAAgBF,GARH,cAQrCK,EARqC,yBASpCA,GAToC,2CAAJ,wDAoO1BC,E,kDAtNb,WAAYxD,GAAQ,IAAD,8BACjB,cAAMA,IAEDyD,MAAQ,CACX9B,SAAU,KACVG,OAAQ,KACR4B,YAAa,GACbhB,UAAW,GACXiB,cAAe,GACfC,mBAAoB,KACpBC,WAAY,IAGd,EAAKC,gBAAkB,EAAKA,gBAAgBC,KAArB,gBACvB,EAAKC,oBAAsB,EAAKA,oBAAoBD,KAAzB,gBAC3B,EAAKE,cAAgB,EAAKA,cAAcF,KAAnB,gBACrB,EAAKG,oBAAsB,EAAKA,oBAAoBH,KAAzB,gBAC3B,EAAKI,0BAA4B,EAAKA,0BAA0BJ,KAA/B,gBACjC,EAAKK,WAAa,EAAKA,WAAWL,KAAhB,gBAElB,EAAKM,UApBY,E,gMAwBkB3C,I,uBAA3BC,E,EAAAA,SAAUG,E,EAAAA,O,SACKH,EAAS2C,a,OAA1BhC,E,OAAwCiC,QACxC7B,EAAYC,EAAaL,GACzBoB,EAAc,CAACzV,KAAMyU,EAAUP,KAAMM,QAASC,EAAUA,EAAUP,OACxErI,KAAK0K,SAAS,CAAE9B,YAAWgB,cAAa/B,WAAUG,WAElDhI,KAAK2K,SAAWhT,EAAKkQ,GACrB7H,KAAK4K,SAAWtB,EAAgBtB,GAChChI,KAAK6K,YAAYjB,EAAYjB,SAC7B3I,KAAK8K,cAAclB,EAAYjB,S,yIAGrBA,IACVA,EAAUA,GAAW3I,KAAK2J,MAAMC,cAK9B5J,KAAK+K,QAAU/K,KAAK2K,SAAShC,GAC7B3I,KAAKgL,QAAUhL,KAAK4K,SAASjC,GAC7B3I,KAAKkG,MAAM+E,aAAajL,KAAK+K,QAAS/K,KAAKgL,WALzChL,KAAK+K,QAAU,KACf/K,KAAKgL,QAAU,Q,6EAQDrC,G,kFAClBA,EAAUA,GAAW3I,KAAK2J,MAAMC,YAAYjB,Q,iEAG1B3I,KAAK+K,QAAQ,c,OAA3B1R,E,OACJA,EAAQ5F,SAAS4F,EAAO,IACpB0Q,EAAa,GAERjV,EAAI,E,YAAGA,GAAKuE,G,wBACb6R,EAAOC,IAAO9N,OAAO,kBAAoBvI,EAAI,K,UACjCkL,KAAKkG,MAAM6E,QAAQG,G,QACrCE,EAAQ,MADJA,E,QACiBtX,UAAU,IAC/BiW,EAAWqB,GAASA,E,QAJMtW,I,uBAM5BkL,KAAK0K,SAAS,CAAEX,e,uLAwBIpB,G,wEACZiB,EAAgB5J,KAAK2J,MAArBC,aACIjB,QAAUA,EACtB3I,KAAK0K,SAAS,CAAEd,gB,iJAGEzV,GAAO,IACjByV,EAAgB5J,KAAK2J,MAArBC,YACRA,EAAYzV,KAAOA,EACnB6L,KAAK0K,SAAS,CAAEd,kB,iKAIRA,EAAgB5J,KAAK2J,MAArBC,YACA/B,EAAc7H,KAAK2J,MAAnB9B,S,SACeA,EAAS2C,a,OAA1BhC,E,OAAwCiC,QAE9C/B,EAAWF,EAASoB,EAAYjB,QAASiB,EAAYzV,MACrD6L,KAAK6K,YAAYjB,EAAYjB,SAC7B3I,KAAK8K,cAAclB,G,gJAGDyB,GAAS,IACnBzC,EAAc5I,KAAK2J,MAAnBf,UAEFgB,EAAc,CAAEzV,KADTgG,OAAOpB,KAAK6P,GAAW0C,MAAK,SAAAnX,GAAI,OAAIyU,EAAUzU,KAAUkX,KACzC1C,QAAS0C,GACrCrL,KAAK0K,SAAS,CAAEd,gBAChB5J,KAAK6K,YAAYjB,EAAYjB,SAC7B3I,KAAK8K,cAAcO,K,gDAGKA,GACxBrL,KAAK0K,SAAS,CAAEZ,mBAAoBuB,M,4JAI5BvB,EAAuB9J,KAAK2J,MAA5BG,mBAEFoB,EAAOC,IAAO9N,OAAO,iBAAmByM,EAAmBhW,UAAU,GAAK,M,SAC1EkM,KAAKgL,QAAQE,G,OAGnBlL,KAAK8K,gB,qIAGG,IACD3E,EAAUnG,KAAKkG,MAAfC,OADA,EAEwCnG,KAAK2J,MAA5CC,EAFD,EAECA,YAAahB,EAFd,EAEcA,UAAWmB,EAFzB,EAEyBA,WAEhC,OACE,kBAAC,OAAD,CAAMnD,MAAK,eAAOT,EAAP,CAAeH,SAAU,MAClC,kBAAC,OAAD,CAAMY,MAAK,eAAOT,EAAP,CAAeU,KAAM,KAC9B,kBAAC,OAAD,CAAMD,MAAO,CAAED,MAAOR,EAAOQ,QAC3B,kBAAC,QAAD,CACEC,MAAO,CAAEE,MAAO,SAChByE,YAAY,UACZC,MAAM,UACNC,aAAczL,KAAKgK,mBAGvB,kBAAC,OAAD,CAAMpD,MAAO,CAAED,MAAOR,EAAOQ,QAC3B,kBAAC,QAAD,CACEC,MAAO,CAAEE,MAAO,SAChByE,YAAY,OACZC,MAAM,OACNC,aAAczL,KAAKkK,uBAGvB,kBAAC,SAAD,CAAQwB,OAAK,EAACC,OAAK,EAACC,QAAS5L,KAAKmK,eAChC,kBAAC,OAAD,CAAMhW,KAAK,WAGf,kBAAC,OAAD,CAAMyS,MAAK,eAAOT,EAAP,CAAeU,KAAM,KAC9B,kBAAC,OAAD,CAAMgF,QAAM,GACV,kBAAC,SAAD,CACEC,KAAK,WACLlF,MAAO,CAAED,MAAOR,EAAOQ,MAAOoF,gBAAiB,sBAC/CC,cAAehM,KAAK2J,MAAMC,YAAYzV,KACtC8X,cAAejM,KAAKoK,qBAEpB,kBAAC,SAAO8B,KAAR,CAAaV,MAAM,cAAcnY,MAAO,KAEtC8G,OAAOpB,KAAK6P,GAAWlU,KAAI,SAAAP,GACzB,OAAO,kBAAC,SAAO+X,KAAR,CAAaV,MAAOrX,EAAMd,MAAOuV,EAAUzU,GAAOkG,IAAKlG,SAKtE,kBAAC,OAAD,CAAMyS,MAAO,CAAED,MAAOR,EAAOQ,MAAOE,KAAM,EAAGsF,WAAY,KACvD,kBAAC,OAAD,CAAMvF,MAAO,CAAEE,MAAO,QAASd,SAAU,KAAzC,iBACA,6BACA,kBAAC,OAAD,CAAMY,MAAO,CAAEE,MAAO,QAASd,SAAU,KAAQ4D,EAAYzV,MAAQ,IAArE,MAA+EyV,EAAYjB,SAAW,MAExG,kBAAC,OAAD,CAAMkD,QAAM,GACV,kBAAC,SAAD,CACEC,KAAK,WACLlF,MAAO,CAAED,MAAOR,EAAOQ,MAAOoF,gBAAiB,sBAC/CC,cAAehM,KAAK2J,MAAMC,YAAYzV,KACtC8X,cAAejM,KAAKoK,qBAEpB,kBAAC,SAAO8B,KAAR,CAAaV,MAAM,6BAA6BnY,MAAO,KAErD8G,OAAOpB,KAAKgR,GAAYrV,KAAI,SAAAP,GAC1B,OAAO,kBAAC,SAAO+X,KAAR,CAAaV,MAAOrX,EAAMd,MAAOuV,EAAUzU,GAAOkG,IAAKlG,SAKtE,kBAAC,OAAD,CAAMyS,MAAO,CAAED,MAAOR,EAAOQ,QAC3B,kBAAC,QAAD,CACEC,MAAO,CAAEE,MAAO,SAChByE,YAAY,UACZC,MAAM,UACNC,aAAczL,KAAKqK,6BAGvB,kBAAC,SAAD,CAAQqB,OAAK,EAACC,OAAK,EAACC,QAAS5L,KAAKsK,YAChC,kBAAC,OAAD,kBAEF,kBAAC,OAAD,KACI,kBAAC,OAAD,a,GA/Me8B,a,IC2JdC,E,kDAjKb,WAAYnG,GAAQ,IAAD,sBACjB,cAAMA,GAEN,IAAMV,EFLM,WACd,IAAI8G,EAASjF,OAAOyB,aAAaI,QAnBV,cAwBvB,OAJKoD,IACHA,EAtBiB,iCAuBjBjF,OAAOyB,aAAaC,QAtBC,aAsByBuD,IAEzCA,EEDSC,GACR9R,EAAU0Q,IAAO9N,OAAOmI,GAJb,OAMjB,EAAKmE,MAAL,eACK,EAAK6C,sBADV,CAEEC,WAAY,EACZC,aAAa,EACblH,OACA/K,UACA8B,OAAQ,CAAC,CAACH,KAAM3B,IAChB2L,OAAQ,GACRyB,SAAU,KACVG,OAAQ,KACR4B,YAAa,KACbmB,QAAS,KACTC,QAAS,OAGX,EAAK2B,oBAAsB,EAAKA,oBAAoB1C,KAAzB,gBAC3B,EAAKuC,oBAAsB,EAAKA,oBAAoBvC,KAAzB,gBAC3B,EAAK2C,aAAe,EAAKA,aAAa3C,KAAlB,gBACpB,EAAK4C,QAAU,EAAKA,QAAQ5C,KAAb,gBACf,EAAKgB,aAAe,EAAKA,aAAahB,KAAlB,gBAEpB,EAAKM,UA3BY,E,0LA+BkB3C,I,gBAA3BC,E,EAAAA,SAAUG,E,EAAAA,OAClBhI,KAAK0K,SAAS,CAAE7C,WAAUG,WAC1BhI,KAAKiL,e,yIAGMF,EAASC,GACpBhL,KAAK0K,SAAS,CACVK,UACAC,YAEJhL,KAAK6M,Y,gNAGoC,GAA5BC,E,EAAAA,QAAStH,E,EAAAA,K,IAAMuH,a,SAC1BD,EAAUA,GAAW9M,KAAK2J,MAAMlP,QAChC+K,EAAOA,GAAQxF,KAAK2J,MAAMnE,KACJA,GAAQA,EAAKwH,SAAS,Q,0CAItBhN,KAAK2J,MAAMoB,QAAQ+B,G,OAAnCrS,E,iEAGJ,IACI8B,EAAS4O,IAAOjO,OAAOzC,GACzB,MAAMyK,IACRlF,KAAK0K,SAAS,CAAEnO,OAAQ,CAAC,CAAEA,SAAQ9B,UAAS2B,KAAM0Q,M,4BACzCC,E,wBACOE,EAAU,G,oBAELjN,KAAK2J,MAAMqB,QAAQ8B,G,eAApCrD,E,OACAzJ,KAAK0K,SAAS,CAAEnO,OAAQ,CAAC,CAAE0Q,QAASxD,M,UACpBA,EAASyD,O,QAAzBD,E,qEAGmB,IAAnBA,EAAQE,O,uBACF,IAAItR,MAAM,sB,QAEpBmE,KAAK0K,SAAS,CAAEnO,OAAQ,CAAC,CAAE0Q,c,oKAM/BjN,KAAK0K,SAAS1K,KAAKwM,yB,4CAInB,IAAIY,EAAQC,IAAWvU,IAAI,UACvBwU,EAAWC,SAASC,eAAe,cAAcC,wBAMrD,MAJa,CACX9G,MAAOyG,EAAMzG,OAAS2G,EAAS3G,MAC/B+G,OAAQN,EAAMM,QAAUJ,EAASI,U,qCAKtBC,EAAQC,GACrBD,EAAOE,U,mCAGIrI,GACT,IACE,IAAM/K,EAAU0Q,IAAO9N,OAAOmI,GAC9BxF,KAAK0K,SAAS,CAAElF,SFtGN8G,EEuGY9G,EFtG5B6B,OAAOyB,aAAaC,QAfG,aAeuBuD,GEuGxCtM,KAAK6M,QAAQ,CAACC,QAASrS,EAAS+K,SAChC,MAAMN,IFzGI,IAAAoH,I,+BE4GN,IAAD,SAIHtM,KAAK2J,MAFPhD,EAFK,EAELA,MACA+G,EAHK,EAGLA,OAEIvH,EAlHV,SAAqB2H,EAArB,GAAkD,IAAjBnH,EAAgB,EAAhBA,MAAO+G,EAAS,EAATA,OACtC,OAAI/G,EAHY,IAGc,CAACoH,SAAUpH,EAAOqH,UAAWN,GAEpD,CAAC/G,MAAOA,EAAQmH,EAAWJ,UA+GjBO,CAAYjO,KAAK2J,MAAM8C,WAAY,CAAE9F,QAAO+G,WAErDQ,EAAY,eAAQ/H,EAAR,CAAgBQ,MAAsB,EAAfR,EAAOQ,MAAW+G,OAAwB,EAAhBvH,EAAOuH,OAAa,IACjFS,EAAa,eAAQhI,EAAR,CAAgBQ,MAAsB,EAAfR,EAAOQ,MAAW+G,OAAQvH,EAAOuH,OAASQ,EAAaR,SAC3FU,EAAW,eAAQjI,GATlB,EAW0CnG,KAAK2J,MAA/CnE,EAXA,EAWAA,KAAMjJ,EAXN,EAWMA,OAAQ6J,EAXd,EAWcA,OAAQ2E,EAXtB,EAWsBA,QAASC,EAX/B,EAW+BA,QAEtC,OACI,kBAAC3E,EAAA,EAAD,CACIC,YAAY,EACZ+H,eAAe,EACf9H,eAAe,EACfC,oBAAqB,IACrBC,qBAAqB,EACrBC,sBAAuB,CAACC,MAAO,QAC/BgG,oBAAqB3M,KAAK2M,qBAE1B,kBAAC,OAAD,CAAM/F,MAAK,eAAOsH,EAAP,CAAqBrH,KAAM,KAClC,kBAAC,IAAD,CACIF,MAAOuH,EAAavH,MACpB+G,OAAQQ,EAAaR,OACrBY,SAAS,aACTtH,MAAM,UACN3T,MAAOmS,EACP+I,QAAS7I,EACT8I,SAAUxO,KAAK4M,aACf6B,eAAgBzO,KAAKyO,iBAEzB,kBAAC,EAAD,CACIlS,OAAQA,EACR6J,OAAQA,EACRD,OAAM,eAAOgI,MAGrB,kBAAC,SAAD,CACIzC,OAAK,EACLC,OAAK,EACL/E,MAAO,CAAEtD,SAAU,QAASoL,IAAK,MAAOC,KAAM,MAAO5C,gBAAiB,QAAU6C,QAAS5O,KAAK2J,MAAM+C,YAAc,GAAM,IACxHd,QAAS,kBAAM,EAAKiB,QAAQ,CAACE,OAAO,MAEpC,kBAAC,OAAD,CAAMhR,KAAK,cAAc5H,KAAK,UAElC,kBAAC,EAAD,CACI4W,QAASA,EACTC,QAASA,EACT7E,OAAM,eAAMiI,GACZnD,aAAcjL,KAAKiL,oB,GA3JRmB,aCZZyC,MAJf,SAAc3I,GACZ,OAAQ,kBAAC,EAAD,OCOU4I,QACW,cAA7BzH,OAAO0H,SAASC,UAEe,UAA7B3H,OAAO0H,SAASC,UAEhB3H,OAAO0H,SAASC,SAAStL,MACvB,2DCLNuL,IAASC,OAAO,kBAAC,EAAD,MAAS3B,SAASC,eAAe,eDsH3C,kBAAmB2B,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACL9K,QAAQ8K,MAAMA,EAAMC,c","file":"static/js/main.0cd1b95e.chunk.js","sourcesContent":["const ethers = require('ethers');\nconst { hexStripZeros, hexZeroPad } = ethers.utils;\nconst malReader = require('./mal/reader.js');\nconst malPrinter = require('./mal/printer.js');\nconst malTypes = require('./mal/types.js');\nrequire('./extensions.js');\n\nconst u2b = value => value.toString(2);\nconst u2h = value => value.toString(16);\nconst b2u = value => parseInt(value, 2);\nconst b2h = value => u2h(b2u(value));\nconst h2u = value => parseInt(value, 16);\nconst h2b = value => u2b(h2u(value));\nconst x0 = value => '0x' + value;\nconst strip0x = value => value.substring(0, 2) === '0x' ? value.substring(2) : value;\n\nconst bytesMarker = '0x';\nconst arityb = arity => u2b(arity).padStart(4, '0');\nconst mutableb = mutable => mutable ? '1' : '0';\nconst fidb = id => u2b(id).padStart(26, '0');\nconst funcidb = name => {\n    const nativef = typeof name === 'string' ? nativeEnv[name] : name;\n    if (nativef.hex) return nativef;\n    \n    let binf, hex;\n    if (!nativef.composed) {\n        binf = arity => '1' + arityb(arity) + fidb(nativef.id) + mutableb(nativef.mutable);\n    } else {\n        const composedf = nativef.composed.map(cname => funcidb(cname));\n        binf = arities => composedf.map((funcs, i) => typeof funcs.bin === 'string' ? funcs.bin : funcs.bin(arities[i])).join('');\n        hex = arities => composedf.map((funcs, i) => typeof funcs.hex === 'string' ? funcs.hex : funcs.hex(arities[i])).join('');\n    }\n    \n    if (nativef.arity !== null) {\n        const bin = binf(nativef.arity);\n        return { bin, hex: b2h(bin) }\n    }\n    return { bin: binf, hex: hex || (arity => b2h(binf(arity))) }\n}\nconst unknown = index => {\n    let id = b2h(typeid.unknown + '0'.padStart(24, '0')).padStart(8, '0');\n    let value = u2h(index).padStart(8, '0');\n    return id + value;\n}\nconst listTypeId = len => strip0x(hexZeroPad(x0(b2h(\n    typeid.list + u2b(1).padStart(4, '0') + len\n)), 4));\n\nconst typeid = {\n    function: '1',\n    array: '01',\n    struct: '001',\n    list: '0001',\n    number: '00001',\n    bytelike: '000001',\n    enum: '0000001',\n    unknown: '00000001',\n}\nconst fulltypeidHex = {\n    // nil shorthand for empty list\n    Nil: listTypeId(0),\n    None: '',\n    // unit - equivalent to void, for functions without return type\n    Unit: '',\n    // trait\n    Nothing: b2h('00000000000000000000000000000000'),\n    Any: b2h('00000000000000000000000000000001'),\n}\n\nconst numberid = {\n    complex: '00000000000',\n    real: '01000000000',\n    bigfloat: '01000000000',\n    float: '01000001000',\n    irrational: '01001000000',\n    bool: '01010000000',\n    bigint: '01010001000',\n    int: '01010001001',\n    biguint: '01010010000',\n    uint: '01010010001',\n    rational: '', // TODO\n}\n\nconst nativeEnv = {\n    // EVM specific\n    add:          { mutable: false, arity: 2 },\n    sub:          { mutable: false, arity: 2 },\n    mul:          { mutable: false, arity: 2 },\n    div:          { mutable: false, arity: 2 },\n    sdiv:         { mutable: false, arity: 2 },\n    mod:          { mutable: false, arity: 2 },\n    smod:         { mutable: false, arity: 2 },\n    exp:          { mutable: false, arity: 2 },\n    not:          { mutable: false, arity: 1 },\n    lt:           { mutable: false, arity: 2 },\n    gt:           { mutable: false, arity: 2 },\n    slt:          { mutable: false, arity: 2 },\n    sgt:          { mutable: false, arity: 2 },\n    eq:           { mutable: false, arity: 2 },\n    iszero:       { mutable: false, arity: 1 },\n    and:          { mutable: false, arity: 2 },\n    or:           { mutable: false, arity: 2 },\n    xor:          { mutable: false, arity: 2 },\n    byte:         { mutable: false, arity: 2 },\n    shl:          { mutable: false, arity: 2 },\n    shr:          { mutable: false, arity: 2 },\n    sar:          { mutable: false, arity: 2 },\n    addmod:       { mutable: false, arity: 3 },\n    mulmod:       { mutable: false, arity: 3 },\n    signextend:   { mutable: false, arity: 2 },\n    keccak256:    { mutable: false, arity: 2 },\n    call:         { mutable: true, arity: 2 },\n    callcode:     { mutable: true, arity: 2 },\n    delegatecall: { mutable: true, arity: 2 },\n    staticcall:   { mutable: false, arity: 2 },\n    \n    // Mal specific\n    list:         { mutable: false, arity: null },\n    apply:        { mutable: false, arity: null },\n    lambda:       { mutable: false, arity: null },\n    'fn*':        { mutable: false, arity: null },\n    'def!':       { mutable: false, arity: 2 },\n    getf:         { mutable: false, arity: null },\n    if:           { mutable: false, arity: 3 },\n    contig:       { mutable: false, arity: 2 },\n    concat:       { mutable: false, arity: 2 },\n    map:          { mutable: false, arity: 2 },\n    reduce:       { mutable: false, arity: 3 },\n    nth:          { mutable: false, arity: 2 },\n    first:        { mutable: false, arity: 1 },\n    rest:         { mutable: false, arity: 1 },\n    'empty?':     { mutable: false, arity: 1 },\n    'true?':      { mutable: false, arity: 1 },\n    'false?':     { mutable: false, arity: 1 },\n    \"let*\":       { mutable: false, arity: 2 },\n\n    // Mal specific - unimplemented, just placeholders\n    cons:         { mutable: false, arity: 2 },  // prepend item to list\n    concat2:      { mutable: false, arity: null },  // concats lists\n    'nil?':       { mutable: false, arity: 1 },\n    'list?':      { mutable: false, arity: 1 },\n    vector:       { mutable: false, arity: null },\n    'vector?':    { mutable: false, arity: 1 },\n    'sequential?':{ mutable: false, arity: 1 },\n    'hash-map':   { mutable: false, arity: null },\n    'map?':       { mutable: false, arity: 1 },\n    assoc:        { mutable: false, arity: null },\n    dissoc:       { mutable: false, arity: 2 },\n    get:          { mutable: false, arity: 2 },\n    'contains?':  { mutable: false, arity: 2 },\n    keys:         { mutable: false, arity: 1 },\n    vals:         { mutable: false, arity: 1 },\n    'fn?':        { mutable: false, arity: 1 },\n    'string?':    { mutable: false, arity: 1 },\n    'number?':    { mutable: false, arity: 1 },\n    seq:          { mutable: false, arity: 1 },\n    conj:         { mutable: false, arity: 1 },\n    symbol:       { mutable: false, arity: 1 },\n    'symbol?':    { mutable: false, arity: 1 },\n    keyword:      { mutable: false, arity: 1 },\n    'keyword?':   { mutable: false, arity: 1 },\n    count:        { mutable: false, arity: 1 },\n    do:           { mutable: false, arity: 1 },\n    'try*':       { mutable: false, arity: 2 },\n    'catch*':     { mutable: false, arity: 2 },\n    throw:        { mutable: false, arity: 1 },\n    'defmacro!':  { mutable: false, arity: 2 },\n    is_macro_call:{ mutable: false, arity: 2 },\n    macroexpand:  { mutable: false, arity: 2 },\n    atom:         { mutable: false, arity: 1 },\n    'atom?':      { mutable: false, arity: 1 },\n    deref:        { mutable: false, arity: 1 },\n    'swap!':      { mutable: false, arity: null },\n    'reset!':     { mutable: false, arity: 1 },\n    'time-ms':    { mutable: false, arity: 0 },\n    meta:         { mutable: false, arity: 1 },\n    'with-meta':  { mutable: false, arity: 2 },\n    quote:        { mutable: false, arity: null },\n    quasiquote:   { mutable: false, arity: null },\n    prn:          { mutable: false, arity: null },\n    'pr-str':     { mutable: false, arity: null },\n    str:          { mutable: false, arity: null },\n    println:      { mutable: false, arity: null },\n    readline:     { mutable: false, arity: 1 },\n    \n    // Taylor specific\n    'register!':  { mutable: false, arity: 1 },\n    'getregistered': { mutable: false, arity: 1 },\n    'defstruct!': { mutable: false, arity: 2 },\n    \n    // TODO: curry\n    // TODO: pay\n}\n\nObject.keys(nativeEnv).forEach((key, id) => {\n    nativeEnv[key].id = id + 1;\n    nativeEnv[key].idb = fidb(nativeEnv[key].id);\n    nativeEnv[key].idmask = '10000' + nativeEnv[key].idb + '0';\n    nativeEnv[key].idmaskhex = b2h(nativeEnv[key].idmask);\n    const { bin, hex } = funcidb(key);\n    nativeEnv[key].encoded = bin;\n    nativeEnv[key].hex = hex;\n});\nnativeEnv.lambda.encoded = bodylenb => '100011' + u2b(bodylenb / 2).padStart(25, '0') + '0';\nnativeEnv.lambda.hex = bodylenb => b2h(nativeEnv.lambda.encoded(bodylenb));\n\n// console.log('nativeEnv', nativeEnv);\n\nconst reverseNativeEnv = {};\nObject.keys(nativeEnv).forEach(key => {\n    if (typeof nativeEnv[key].hex === 'string') {\n        reverseNativeEnv[nativeEnv[key].hex] = key;\n    }\n});\n// console.log('reverseNativeEnv', reverseNativeEnv)\n\nconst formatId = id => strip0x(hexZeroPad(x0(b2h(id)), 4));\nconst getnumberid = size => formatId(typeid.number + numberid.uint + u2b(size).padStart(16, '0'))\nconst getboolid = value => formatId(typeid.number + numberid.bool + u2b(value ? 1 : 0).padStart(16, '0'));\nconst getbytesid = length => formatId(typeid.bytelike + u2b(length).padStart(26, '0'));\n\nconst isFunction = sig => (sig & 2147483648) !== 0;\nconst isLambda = sig => (sig & 0x4000000) !== 0;\nconst isApply = sig => (sig & 0x7fffffe) === 0x40;\nconst isList = sig => (sig & 0x7fffffe) === 0x3e;\nconst isArray = sig => (sig & 0x40000000) !== 0;\nconst isStruct = sig => (sig & 0x20000000) !== 0;\nconst isListType = sig => (sig & 0x10000000) !== 0;\nconst isNumber = sig => (sig & 0x8000000) !== 0;\nconst isBool = sig => (sig & 0x0a800000) === 0x0a800000;\nconst isBytelike = sig => (sig & 0x4000000) !== 0;\nconst isEnum = sig => (sig & 0x2000000) !== 0;\nconst isLambdaUnknown = sig => (sig & 0x1000000) !== 0;\nconst isGetByName = sig => (sig & 0x7fffffe) === 0x48;\n\nconst numberSize = sig => sig & 0xffff;\nconst listTypeSize = sig => sig & 0xffffff;\nconst bytelikeSize = sig => sig & 0x3ffffff;\nconst funcArity = sig => (sig & 0x78000000) >> 27;\nconst lambdaLength = sig => (sig & 0x3fffffe) >> 1;\nconst getSignatureLength = 4;\n// const getValueLength = \n\nconst tableSig = {}\ntableSig[nativeEnv['def!'].hex] = {offsets: [64, 8], aritydelta: -1}\ntableSig[nativeEnv['if'].hex] = {offsets: [8, 8], aritydelta: 0}\ntableSig['lambda'] = {offsets: lambdaLength}\ntableSig['isGetByName'] = {offsets: [64]}\n\n// TODO: this only encodes uint\nconst encode = (types, values) => {\n    if (types.length !== values.length) throw new Error('Encode - different lengths.');\n   return types.map((t, i) => {\n        switch (t.type) {\n            case 'uint':\n                const id = getnumberid(t.size)\n                const value = parseInt(values[i]);\n                const padded = strip0x(hexZeroPad(\n                    x0(u2h(value)),\n                    t.size\n                ));\n                return id + padded;\n            case 'bytes':\n                if (!ethers.utils.isHexString(x0(values[i]))) {\n                    throw new Error('Invalid bytes literal.')\n                }\n                const val = strip0x(values[i]);\n                const length = val.length / 2;\n                return  getbytesid(length) + val;\n            case 'list':\n                let len = u2b(values[i].length).padStart(24, '0');\n                const lid = listTypeId(len);\n\n                return lid + values[i].map(value => encode([{type: 'uint', size: 4}], [value]))\n                    .join('');\n            case 'bool':\n                return getboolid(values[i]);\n            default:\n                throw new Error('Not implemented');\n        }\n    }).join('');\n}\n\nconst decodeInner = (sig, data) => {\n    if (isNumber(sig)) {\n        const size = numberSize(sig);\n        result = h2u(data.substring(0, size*2));\n        data = data.substring(size*2);\n        return { result, data };\n    } else if (isBytelike(sig)) {\n        const length = bytelikeSize(sig);\n        result = data.substring(0, length*2)\n        data = data.substring(length*2);\n        return { result, data };\n    } else if (isListType(sig)) {\n        const length = listTypeSize(sig);\n        \n        const result = [...new Array(length)].map((_, i) => {\n            const partsig = parseInt(data.substring(0, 8), 16);\n            let result;\n            ({result, data} = decodeInner(partsig, data.substring(8)));\n            return result;\n        });\n        return { result, data };\n    } else {\n        throw new Error('decode type not supported: ' + sig);\n    }\n}\n\nconst decode = data => {\n    data = strip0x(data);\n    const decoded = [];\n\n    while (data.length > 0) {\n        let result;\n        const sig = parseInt(data.substring(0, 8), 16);\n        ({result, data} = decodeInner(sig, data.substring(8)));\n        decoded.push(result);\n    }\n    return decoded;\n}\n\nconst ast2h = (ast, parent=null, unkownMap={}, defenv={}) => {\n    // do not count the function itselt\n    const arity = ast.length - 1;\n\n    if (ast[0] && ast[0].value === 'def!') {\n        const elem = ast[0];\n        const defname = ast[1].value.hexEncode().padStart(64, '0');\n        const exprbody = ast2h(ast[2], ast, defenv);\n        const exprlen = u2h(exprbody.length / 2).padStart(8, '0');\n        return nativeEnv[elem.value].hex + defname + exprlen + exprbody;\n    }\n    return ast.map((elem, i) => {\n        // if Symbol\n        if (malTypes._symbol_Q(elem)) {\n            if (!nativeEnv[elem.value]) {\n                if (elem.value === bytesMarker) {\n                    const typeid = getbytesid(ast[i + 1].length / 2);\n                    return  typeid + ast[i + 1];\n                }\n                // check if stored function first\n                // TODO: on-chain check\n                // const isfunc = defenv.isFunction(elem.value)\n                if (!unkownMap[elem.value] && elem.value[0] === '_') {\n                    // TODO proper type - string/bytes\n                    const encodedName = getnumberid(32) + elem.value.substring(1).hexEncode().padStart(64, '0');\n\n                    // if function is first arg, it is executed\n                    // otherwise, it is referenced as an argument (lambda)\n                    let arity = ast[0].value === elem.value ? ast.length : 1;\n                    // getf <fname>\n                    return nativeEnv.getf.hex(arity) + encodedName;\n                }\n                \n                // lambda variables should end up here\n                // lambda argument definition\n                if (!unkownMap[elem.value]) {\n                    unkownMap[elem.value] = unknown(i);\n                    // TODO: now we don't include `(a, b)` from `fn* (a b) (add a b)`\n                    // if (parent[0] && parent[0].value === 'let*') {\n                    //     return unkownMap[elem.value];\n                    // }\n                    return '';\n                }\n                return unkownMap[elem.value];\n            }\n            if (elem.value === 'if') {\n                const action1body = ast2h([ast[2]], null, defenv);\n                const action2body = ast2h([ast[3]], null, defenv);\n                return nativeEnv[elem.value].hex\n                    + u2h(action1body.length / 2).padStart(8, '0')\n                    + u2h(action2body.length / 2).padStart(8, '0');\n            }\n            // if (elem.value === 'let*') {\n            //     console.log('ast', ast)\n            // }\n            if (typeof nativeEnv[elem.value].hex === 'string') {\n                return nativeEnv[elem.value].hex;\n            }\n            if (typeof nativeEnv[elem.value].hex !== 'function') {\n                throw new Error('Unexpected native function: ' + elem.value);\n            }\n\n            // variadic functions\n\n            if (elem.value === 'fn*') {\n                const lambdaBody = ast2h([ast[1], ast[2]], null, defenv);\n                let encoded = nativeEnv.lambda.hex(lambdaBody.length);\n                const arity = ast[1].length;\n\n                // we execute it with apply only if there is a parent ast\n                // with this lambda at index 0\n                if (parent && parent[0][0] && parent[0][0].value === elem.value) {\n                    // apply arity: 1 + number of args\n                    encoded = nativeEnv.apply.hex(arity + 1) + encoded;\n                }\n                return encoded;\n            }\n\n            return nativeEnv[elem.value].hex(arity);\n        }\n\n        if (elem instanceof Array) {\n            return ast2h(elem, ast, unkownMap, defenv);\n        }\n\n        if (typeof elem === 'boolean') {\n            return encode([{type: 'bool'}], [elem]);\n        }\n\n        // TODO\n        if (\n            (parseInt(elem) || parseInt(elem) === 0)\n            && (!ast[i - 1] || ast[i - 1].value !== bytesMarker)\n        ) {\n            return encode([{type: 'uint', size: 4}], [elem]);\n        }\n\n    }).join('');\n}\n\nconst expr2h = (expression, defenv) => {\n    const ast = malReader.read_str(expression);\n    return x0(ast2h(ast, null, {}, defenv));\n}\n\nconst expr2string = (inidata, pos=0, accum='') => {\n    let name, arity;\n    let unknownList = [];\n    let data = inidata.substring(pos);\n    const sig = data.substring(0, 8);\n    const sigu = parseInt(sig, 16);\n    data = data.substring(8);\n    pos += 8;\n\n    const isf = isFunction(sigu);\n\n    if (isf) {\n        if (reverseNativeEnv[sig]) {\n            name =  reverseNativeEnv[sig];\n            accum += '(' + name + ' ';\n            arity = funcArity(sigu);\n        }\n        \n        if (name === 'def!') {\n            const fname = data.substring(0, tableSig[sig].offsets[0]).hexDecode();\n            accum += ' ' + fname.toString() + ' ';\n            data = data.substring(tableSig[sig].offsets[0]);\n            pos += tableSig[sig].offsets[0]\n            \n            const exprlen = data.substring(0, tableSig[sig].offsets[1]);\n            data = data.substring(tableSig[sig].offsets[1]);\n            pos += tableSig[sig].offsets[1]\n\n            const res = expr2string(inidata, pos, accum);\n            pos = res.pos;\n            accum = res.accum;\n        } else if (name === 'if') {\n            const action1bodyLen = parseInt(data.substring(0, tableSig[sig].offsets[0]), 16);\n            const action2bodyLen = parseInt(data.substring(0, tableSig[sig].offsets[1]), 16);\n            \n            let res = expr2string(inidata, pos + tableSig[sig].offsets[0] + tableSig[sig].offsets[1], accum);\n            pos = res.pos;\n            accum = res.accum;\n\n            res = expr2string(inidata, pos, accum)\n            pos = res.pos;\n            accum = res.accum;\n            res = expr2string(inidata, pos, accum)\n            pos = res.pos;\n            accum = res.accum;\n\n        } else if (isLambda(sigu)) {\n            accum += '( fn* () '\n            const bodylen = tableSig.lambda.offsets(sigu);\n            const res = expr2string(inidata, pos, accum)\n            accum = res.accum;\n        } else if (isGetByName(sigu)) {\n            const fname = data.substring(8, tableSig.isGetByName.offsets[0]+8).hexDecode();\n            accum += '( _' + fname + ' '\n            pos += tableSig.isGetByName.offsets[0] + 8\n            const res = expr2string(inidata, pos, accum)\n            accum = res.accum;\n        }\n        else {\n            for(let i = 0; i < arity; i++) {\n                let res = expr2string(inidata, pos , accum)\n                pos = res.pos;\n                accum = res.accum;\n            }\n        }\n        accum += ')'\n    }\n    else if (isLambdaUnknown(sigu)) {\n        const index = parseInt(data.substring(0, 8), 16)\n        const uname = 'u_'+index + ' '\n        unknownList.push(uname);\n        accum += ' ' + uname\n        pos += 8\n    }\n    else {\n        const res = decodeInner(sigu, data)\n        accum += ' ' + res.result.toString()\n        pos = inidata.length - res.data.length;\n    }\n    return { pos, accum };\n}\n\nconst expr2s = inidata => expr2string(strip0x(inidata)).accum;\n\nmodule.exports = {\n    u2b, u2h, b2u, b2h, h2u, h2b,\n    typeid, nativeEnv,\n    encode,\n    decode,\n    expr2h,\n    funcidb,\n    expr2s,\n}\n\n","// Node vs browser behavior\nvar types = {};\nif (typeof module === 'undefined') {\n    var exports = types;\n}\n\n// General functions\n\nfunction _obj_type(obj) {\n    if      (_symbol_Q(obj)) {   return 'symbol'; }\n    else if (_list_Q(obj)) {     return 'list'; }\n    else if (_vector_Q(obj)) {   return 'vector'; }\n    else if (_hash_map_Q(obj)) { return 'hash-map'; }\n    else if (_nil_Q(obj)) {      return 'nil'; }\n    else if (_true_Q(obj)) {     return 'true'; }\n    else if (_false_Q(obj)) {    return 'false'; }\n    else if (_atom_Q(obj)) {     return 'atom'; }\n    else {\n        switch (typeof(obj)) {\n        case 'number':   return 'number';\n        case 'function': return 'function';\n        case 'string': return obj[0] == '\\u029e' ? 'keyword' : 'string';\n        default: throw new Error(\"Unknown type '\" + typeof(obj) + \"'\");\n        }\n    }\n}\n\nfunction _sequential_Q(lst) { return _list_Q(lst) || _vector_Q(lst); }\n\n\nfunction _equal_Q (a, b) {\n    var ota = _obj_type(a), otb = _obj_type(b);\n    if (!(ota === otb || (_sequential_Q(a) && _sequential_Q(b)))) {\n        return false;\n    }\n    switch (ota) {\n    case 'symbol': return a.value === b.value;\n    case 'list':\n    case 'vector':\n        if (a.length !== b.length) { return false; }\n        for (var i=0; i<a.length; i++) {\n            if (! _equal_Q(a[i], b[i])) { return false; }\n        }\n        return true;\n    case 'hash-map':\n        if (Object.keys(a).length !== Object.keys(b).length) { return false; }\n        for (var k in a) {\n            if (! _equal_Q(a[k], b[k])) { return false; }\n        }\n        return true;\n    default:\n        return a === b;\n    }\n}\n\n\nfunction _clone (obj) {\n    var new_obj;\n    switch (_obj_type(obj)) {\n    case 'list':\n        new_obj = obj.slice(0);\n        break;\n    case 'vector':\n        new_obj = obj.slice(0);\n        new_obj.__isvector__ = true;\n        break;\n    case 'hash-map':\n        new_obj = {};\n        for (var k in obj) {\n            if (obj.hasOwnProperty(k)) { new_obj[k] = obj[k]; }\n        }\n        break;\n    case 'function':\n        new_obj = obj.clone();\n        break;\n    default:\n        throw new Error(\"clone of non-collection: \" + _obj_type(obj));\n    }\n    Object.defineProperty(new_obj, \"__meta__\", {\n        enumerable: false,\n        writable: true\n    });\n    return new_obj;\n}\n\n\n// Scalars\nfunction _nil_Q(a) { return a === null ? true : false; }\nfunction _true_Q(a) { return a === true ? true : false; }\nfunction _false_Q(a) { return a === false ? true : false; }\nfunction _number_Q(obj) { return typeof obj === 'number'; }\nfunction _string_Q(obj) {\n    return typeof obj === 'string' && obj[0] !== '\\u029e';\n}\n\n\n// Symbols\nfunction Symbol(name) {\n    this.value = name;\n    return this;\n}\nSymbol.prototype.toString = function() { return this.value; }\nfunction _symbol(name) { return new Symbol(name); }\nfunction _symbol_Q(obj) { return obj instanceof Symbol; }\n\n\n// Keywords\nfunction _keyword(obj) {\n    if (typeof obj === 'string' && obj[0] === '\\u029e') {\n        return obj;\n    } else {\n        return \"\\u029e\" + obj;\n    }\n}\nfunction _keyword_Q(obj) {\n    return typeof obj === 'string' && obj[0] === '\\u029e';\n}\n\n\n// Functions\nfunction _function(Eval, Env, ast, env, params) {\n    var fn = function() {\n        return Eval(ast, new Env(env, params, arguments));\n    };\n    fn.__meta__ = null;\n    fn.__ast__ = ast;\n    fn.__gen_env__ = function(args) { return new Env(env, params, args); };\n    fn._ismacro_ = false;\n    return fn;\n}\nfunction _function_Q(obj) { return typeof obj == \"function\"; }\nFunction.prototype.clone = function() {\n    var that = this;\n    var temp = function () { return that.apply(this, arguments); };\n    for( key in this ) {\n        temp[key] = this[key];\n    }\n    return temp;\n};\nfunction _fn_Q(obj) { return _function_Q(obj) && !obj._ismacro_; }\nfunction _macro_Q(obj) { return _function_Q(obj) && !!obj._ismacro_; }\n\n\n// Lists\nfunction _list() { return Array.prototype.slice.call(arguments, 0); }\nfunction _list_Q(obj) { return Array.isArray(obj) && !obj.__isvector__; }\n\n\n// Vectors\nfunction _vector() {\n    var v = Array.prototype.slice.call(arguments, 0);\n    v.__isvector__ = true;\n    return v;\n}\nfunction _vector_Q(obj) { return Array.isArray(obj) && !!obj.__isvector__; }\n\n\n\n// Hash Maps\nfunction _hash_map() {\n    if (arguments.length % 2 === 1) {\n        throw new Error(\"Odd number of hash map arguments\");\n    }\n    var args = [{}].concat(Array.prototype.slice.call(arguments, 0));\n    return _assoc_BANG.apply(null, args);\n}\nfunction _hash_map_Q(hm) {\n    return typeof hm === \"object\" &&\n           !Array.isArray(hm) &&\n           !(hm === null) &&\n           !(hm instanceof Symbol) &&\n           !(hm instanceof Atom);\n}\nfunction _assoc_BANG(hm) {\n    if (arguments.length % 2 !== 1) {\n        throw new Error(\"Odd number of assoc arguments\");\n    }\n    for (var i=1; i<arguments.length; i+=2) {\n        var ktoken = arguments[i],\n            vtoken = arguments[i+1];\n        if (typeof ktoken !== \"string\") {\n            throw new Error(\"expected hash-map key string, got: \" + (typeof ktoken));\n        }\n        hm[ktoken] = vtoken;\n    }\n    return hm;\n}\nfunction _dissoc_BANG(hm) {\n    for (var i=1; i<arguments.length; i++) {\n        var ktoken = arguments[i];\n        delete hm[ktoken];\n    }\n    return hm;\n}\n\n\n// Atoms\nfunction Atom(val) { this.val = val; }\nfunction _atom(val) { return new Atom(val); }\nfunction _atom_Q(atm) { return atm instanceof Atom; }\n\n\n// Exports\nexports._obj_type = types._obj_type = _obj_type;\nexports._sequential_Q = types._sequential_Q = _sequential_Q;\nexports._equal_Q = types._equal_Q = _equal_Q;\nexports._clone = types._clone = _clone;\nexports._nil_Q = types._nil_Q = _nil_Q;\nexports._true_Q = types._true_Q = _true_Q;\nexports._false_Q = types._false_Q = _false_Q;\nexports._number_Q = types._number_Q = _number_Q;\nexports._string_Q = types._string_Q = _string_Q;\nexports._symbol = types._symbol = _symbol;\nexports._symbol_Q = types._symbol_Q = _symbol_Q;\nexports._keyword = types._keyword = _keyword;\nexports._keyword_Q = types._keyword_Q = _keyword_Q;\nexports._function = types._function = _function;\nexports._function_Q = types._function_Q = _function_Q;\nexports._fn_Q = types._fn_Q = _fn_Q;\nexports._macro_Q = types._macro_Q = _macro_Q;\nexports._list = types._list = _list;\nexports._list_Q = types._list_Q = _list_Q;\nexports._vector = types._vector = _vector;\nexports._vector_Q = types._vector_Q = _vector_Q;\nexports._hash_map = types._hash_map = _hash_map;\nexports._hash_map_Q = types._hash_map_Q = _hash_map_Q;\nexports._assoc_BANG = types._assoc_BANG = _assoc_BANG;\nexports._dissoc_BANG = types._dissoc_BANG = _dissoc_BANG;\nexports._atom = types._atom = _atom;\nexports._atom_Q = types._atom_Q = _atom_Q;\n","// Node vs browser behavior\nvar reader = {};\nif (typeof module !== 'undefined') {\n    var types = require('./types');\n} else {\n    var exports = reader;\n}\n\nfunction Reader(tokens) {\n    // copy\n    this.tokens = tokens.map(function (a) { return a; });\n    this.position = 0;\n}\nReader.prototype.next = function() { return this.tokens[this.position++]; }\nReader.prototype.peek = function() { return this.tokens[this.position]; }\n\nfunction tokenize(str) {\n    var re = /[\\s,]*(~@|[\\[\\]{}()'`~^@]|\"(?:\\\\.|[^\\\\\"])*\"?|;.*|[^\\s\\[\\]{}('\"`,;)]*)/g;\n    var results = [];\n    while ((match = re.exec(str)[1]) != '') {\n        if (match[0] === ';') { continue; }\n        results.push(match);\n    }\n    return results;\n}\n\nfunction read_atom (reader) {\n    var token = reader.next();\n    //console.log(\"read_atom:\", token);\n    if (token.match(/^-?[0-9]+$/)) {\n        return parseInt(token,10)        // integer\n    } else if (token.match(/^-?[0-9][0-9.]*$/)) {\n        return parseFloat(token,10);     // float\n    } else if (token.match(/^\"(?:\\\\.|[^\\\\\"])*\"$/)) {\n        return token.slice(1,token.length-1) \n            .replace(/\\\\(.)/g, function (_, c) { return c === \"n\" ? \"\\n\" : c})\n    } else if (token[0] === \"\\\"\") {\n            throw new Error(\"expected '\\\"', got EOF\");\n    } else if (token[0] === \":\") {\n        return types._keyword(token.slice(1));\n    } else if (token === \"nil\") {\n        return null;\n    } else if (token === \"true\") {\n        return true;\n    } else if (token === \"false\") {\n        return false;\n    } else {\n        return types._symbol(token); // symbol\n    }\n}\n\n// read list of tokens\nfunction read_list(reader, start, end) {\n    start = start || '(';\n    end = end || ')';\n    var ast = [];\n    var token = reader.next();\n    if (token !== start) {\n        throw new Error(\"expected '\" + start + \"'\");\n    }\n    while ((token = reader.peek()) !== end) {\n        if (!token) {\n            throw new Error(\"expected '\" + end + \"', got EOF\");\n        }\n        ast.push(read_form(reader));\n    }\n    reader.next();\n    return ast;\n}\n\n// read vector of tokens\nfunction read_vector(reader) {\n    var lst = read_list(reader, '[', ']');\n    return types._vector.apply(null, lst);\n}\n\n// read hash-map key/value pairs\nfunction read_hash_map(reader) {\n    var lst = read_list(reader, '{', '}');\n    return types._hash_map.apply(null, lst);\n}\n\nfunction read_form(reader) {\n    var token = reader.peek();\n    switch (token) {\n    // reader macros/transforms\n    case ';': return null; // Ignore comments\n    case '\\'': reader.next();\n               return [types._symbol('quote'), read_form(reader)];\n    case '`': reader.next();\n              return [types._symbol('quasiquote'), read_form(reader)];\n    case '~': reader.next();\n              return [types._symbol('unquote'), read_form(reader)];\n    case '~@': reader.next();\n               return [types._symbol('splice-unquote'), read_form(reader)];\n    case '^': reader.next();\n              var meta = read_form(reader);\n              return [types._symbol('with-meta'), read_form(reader), meta];\n    case '@': reader.next();\n              return [types._symbol('deref'), read_form(reader)];\n\n    // list\n    case ')': throw new Error(\"unexpected ')'\");\n    case '(': return read_list(reader);\n\n    // vector\n    case ']': throw new Error(\"unexpected ']'\");\n    case '[': return read_vector(reader);\n\n    // hash-map\n    case '}': throw new Error(\"unexpected '}'\");\n    case '{': return read_hash_map(reader);\n\n    // atom\n    default:  return read_atom(reader);\n    }\n}\n\nfunction BlankException(msg) {\n}\n\nfunction read_str(str) {\n    var tokens = tokenize(str);\n    if (tokens.length === 0) { throw new BlankException(); }\n    return read_form(new Reader(tokens))\n}\n\nexports.Reader = reader.Reader = Reader;\nexports.BlankException = reader.BlankException = BlankException;\nexports.tokenize = reader.tokenize = tokenize;\nexports.read_form = reader.read_form = read_form;\nexports.read_str = reader.read_str = read_str;\n","// Node vs browser behavior\nvar printer = {};\nif (typeof module !== 'undefined') {\n    var types = require('./types');\n    // map output/print to console.log\n    printer.println = exports.println = function () {\n        console.log.apply(console, arguments);\n    };\n}\n\nfunction _pr_str(obj, print_readably) {\n    if (typeof print_readably === 'undefined') { print_readably = true; }\n    var _r = print_readably;\n    var ot = types._obj_type(obj);\n    switch (ot) {\n    case 'list':\n        var ret = obj.map(function(e) { return _pr_str(e,_r); });\n        return \"(\" + ret.join(' ') + \")\";\n    case 'vector':\n        var ret = obj.map(function(e) { return _pr_str(e,_r); });\n        return \"[\" + ret.join(' ') + \"]\";\n    case 'hash-map':\n        var ret = [];\n        for (var k in obj) {\n            ret.push(_pr_str(k,_r), _pr_str(obj[k],_r));\n        }\n        return \"{\" + ret.join(' ') + \"}\";\n    case 'string':\n        if (obj[0] === '\\u029e') {\n            return ':' + obj.slice(1);\n        } else if (_r) {\n            return '\"' + obj.replace(/\\\\/g, \"\\\\\\\\\")\n                .replace(/\"/g, '\\\\\"')\n                .replace(/\\n/g, \"\\\\n\") + '\"'; // string\n        } else {\n            return obj;\n        }\n    case 'keyword':\n        return ':' + obj.slice(1);\n    case 'nil':\n        return \"nil\";\n    case 'atom':\n        return \"(atom \" + _pr_str(obj.val,_r) + \")\";\n    default:\n        return obj.toString();\n    }\n}\n\nexports._pr_str = printer._pr_str = _pr_str;\n\n","String.prototype.hexEncode = function(){\n    var hex, i;\n\n    var result = \"\";\n    for (i=0; i<this.length; i++) {\n        hex = this.charCodeAt(i).toString(16);\n        result += (\"000\"+hex).slice(-4);\n    }\n\n    return result\n}\n\nString.prototype.hexDecode = function(){\n    var j;\n    var hexes = this.match(/.{1,4}/g) || [];\n    var back = \"\";\n    for(j = 0; j<hexes.length; j++) {\n        const code = parseInt(hexes[j], 16);\n        if (code !== 0) {\n            back += String.fromCharCode(code);\n        }\n    }\n\n    return back;\n}\n","const editorOpts = {\n  selectOnLineNumbers: true,\n  minimap: {enabled: false},\n  wordWrap: 'on',\n  wordWrapColumn: 80,\n  fontSize: 14,\n}\n\nexport {\n  editorOpts,\n}\n","import React from 'react';\nimport { ScrollView } from 'react-native';\nimport { Text } from 'native-base';\nimport ReactJson from 'custom-react-json-view'\nimport { editorOpts } from '../utils/config.js';\n\nfunction Out(props) {\n    const {styles, result, errors} = props;\n    const fontSize = editorOpts.fontSize;\n\n    return (\n    <ScrollView\n        horizontal={false}\n        scrollEnabled={true}\n        scrollEventThrottle={100}\n        nestedScrollEnabled={true}\n        contentContainerStyle={{width: styles.width}}\n        style={{ ...styles, flex: 1 }}\n    >\n        <ScrollView\n        horizontal={true}\n        scrollEnabled={true}\n        scrollEventThrottle={100}\n        contentContainerStyle={{width: styles.width}}\n        style={{ ...styles, flex: 1 }}\n        >\n        {errors\n            ? <Text style={{color: 'firebrick', fontSize }}>{errors}</Text>\n            : <ReactJson\n            src={result}\n            name=\"result\"\n            theme=\"twilight\"\n            collapsed={6}\n            shouldCollapse={field => field.name === 'd' }\n            style={{ fontSize }}\n            />\n        }\n        </ScrollView>\n    </ScrollView>\n    );\n}\n\nexport default Out;\n","import { ethers } from 'ethers';\n\nconst getWeb3 = async () => {\n    let web3Instance;\n    if (window.ethereum) {\n        // eslint-disable-next-line\n        web3Instance = new Web3(ethereum);\n        try {\n            // eslint-disable-next-line\n            await ethereum.enable();\n        } catch (error) {\n            console.log('User rejected dApp connection');\n        }\n    }\n\n    if (!web3Instance && window.web3) {\n        // eslint-disable-next-line\n        web3Instance = new Web3(web3.currentProvider);\n    }\n\n    if (!web3Instance) {\n        console.log('Non-Ethereum browser detected. Consider trying MetaMask!');\n        return null;\n    }\n    return web3Instance;\n};\n\nconst getProvider = async () => {\n  const web3 = await getWeb3();\n  const provider = new ethers.providers.Web3Provider(web3.currentProvider);\n  const signer = provider.getSigner(0);\n  return { provider, signer };\n}\n\nexport {\n  getWeb3,\n  getProvider,\n}\n","const DEFAULT_CODE = '(add (mul 2 (add 13 56)) 9000)';\nconst STORAGE_KEY_CODE = 'TaylorCode';\nconst STORAGE_KEY_TAYLOR_ADDRESS = 'TaylorInterpreterAddress';\n\nconst DEFAULT_DEPLOYMENT = {\n  5777: {\n    contract1: '0xCFF8dc8A5e2Af7fcc6BE124d3C91FA50186A8c96',\n    root: 'contract1'\n  },\n  3: {\n    contract1: '0x7D4150f492f93e2eDD7FC0Fc62c9193b322f75e5',\n    root: 'contract1',\n  },\n}\n\nconst storeCode = source => {\n  window.localStorage.setItem(STORAGE_KEY_CODE, source);\n}\n\nconst getCode = () => {\n  let source = window.localStorage.getItem(STORAGE_KEY_CODE);\n  if (!source) {\n    source = DEFAULT_CODE;\n    window.localStorage.setItem(STORAGE_KEY_CODE, source);\n  }\n  return source;\n}\n\nconst addressKey = chainid => STORAGE_KEY_TAYLOR_ADDRESS + '_' + chainid;\n\nconst addAddress = (chainid, address, name) => {\n  const key = addressKey(chainid);\n  const addresses = getAddresses(chainid);\n  addresses[name] = address;\n  addresses.root = name;\n  localStorage.setItem(key, JSON.stringify(addresses));\n}\n\nconst getAddresses = (chainid) => {\n  const key = addressKey(chainid);\n  let addresses = localStorage.getItem(key);\n  if (addresses) {\n    addresses = JSON.parse(addresses);\n  } else {\n    addresses = DEFAULT_DEPLOYMENT[chainid] || {};\n    localStorage.setItem(key, JSON.stringify(addresses));\n  }\n  return addresses;\n}\n\nconst getNamedAddress = (chainid, name) => {\n  const addresses = getAddresses(chainid);\n  return addresses[name];\n}\n\nconst clearAddresses = (chainid) => {\n  const key = addressKey(chainid);\n  localStorage.setItem(key, '{}');\n}\n\nexport {\n  storeCode,\n  getCode,\n  addAddress,\n  getAddresses,\n  getNamedAddress,\n  clearAddresses,\n}\n","import React, { Component } from 'react';\nimport { View, Item, Input, Text, Button, Icon, Picker } from 'native-base';\nimport { getProvider } from '../utils/web3.js';\nimport { addAddress, getAddresses } from '../utils/taylor.js';\nimport maltay from 'taylor/maltay/maltay.js';\n\nconst call = provider => address => async data => {\n  let transaction = {\n    to: address,\n    data\n  }\n  return await provider.call(transaction);\n}\n\nconst sendTransaction = signer => address => async data => {\n  const transaction = {\n    data,\n    gasLimit: 1000000,\n    value: 0,\n    to: address,\n    gasPrice: 21,\n  };\n  const response = await signer.sendTransaction(transaction);\n  return response;\n}\n\n\nclass MalTayContract extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      provider: null,\n      signer: null,\n      rootAddress: {},\n      addresses: {},\n      rootFunctions: [],\n      addrToBeRegistered: null,\n      registered: {},\n    }\n\n    this.onChangeAddress = this.onChangeAddress.bind(this);\n    this.onChangeCurrentName = this.onChangeCurrentName.bind(this);\n    this.onAddressSave = this.onAddressSave.bind(this);\n    this.onChangeRootAddress = this.onChangeRootAddress.bind(this);\n    this.onChangeRegisteredAddress = this.onChangeRegisteredAddress.bind(this);\n    this.onRegister = this.onRegister.bind(this);\n  \n    this.setWeb3();\n  }\n\n  async setWeb3() {\n    const { provider, signer } = await getProvider();\n    const chainid = (await provider.getNetwork()).chainId;\n    const addresses = getAddresses(chainid);\n    const rootAddress = {name: addresses.root, address: addresses[addresses.root]};\n    this.setState({ addresses, rootAddress, provider, signer });\n    \n    this._taycall = call(provider);\n    this._taysend = sendTransaction(signer);\n    this.setContract(rootAddress.address);\n    this.setRegistered(rootAddress.address);\n  }\n\n  setContract(address) {\n    address = address || this.state.rootAddress;\n    if(!address) {\n        this.taycall = null;\n        this.taysend = null\n    } else {\n      this.taycall = this._taycall(address);\n      this.taysend = this._taysend(address);\n      this.props.onRootChange(this.taycall, this.taysend);\n    }\n  }\n\n  async setRegistered(address) {\n    address = address || this.state.rootAddress.address;\n    if (!address) return;\n\n    let count = await this.taycall('0x44444440');\n    count = parseInt(count, 16);\n    let registered = {};\n\n    for (let i = 1; i <= count; i++) {\n      const expr = maltay.expr2h('(getregistered ' + i + ')');\n      let raddr = await this.props.taycall(expr);\n      raddr = '0x' + raddr.substring(10);\n      registered[raddr] = raddr;\n    }\n    this.setState({ registered });\n  }\n\n  // async setFunctions(address) {\n  //   address = address || this.state.rootAddress.address;\n  //   if (!address) return;\n\n  //   let rootFunctions = [];\n    \n  //   let count = await this.taycall('0x44444441');\n  //   console.log('count', count);\n  //   // count = parseInt(count, 16);\n  //   // let registered = {};\n\n  //   // for (let i = 1; i <= count; i++) {\n  //   //   const expr = maltay.expr2h('(getregistered ' + i + ')');\n  //   //   let raddr = await this.props.taycall(expr);\n  //   //   raddr = '0x' + raddr.substring(10);\n  //   //   registered[raddr] = raddr;\n  //   // }\n\n  //   // this.setState({ rootFunctions });\n  // }\n\n  async onChangeAddress(address) {\n    const { rootAddress } = this.state;\n    rootAddress.address = address;\n    this.setState({ rootAddress });\n  }\n\n  onChangeCurrentName(name) {\n    const { rootAddress } = this.state;\n    rootAddress.name = name;\n    this.setState({ rootAddress });\n  }\n\n  async onAddressSave() {\n    const { rootAddress } = this.state;\n    const { provider  } = this.state;\n    const chainid = (await provider.getNetwork()).chainId;\n\n    addAddress(chainid, rootAddress.address, rootAddress.name);\n    this.setContract(rootAddress.address);\n    this.setRegistered(rootAddress);\n  }\n\n  onChangeRootAddress(newval) {\n    const { addresses } = this.state;\n    const name = Object.keys(addresses).find(name => addresses[name] === newval);\n    const rootAddress = { name, address: newval};\n    this.setState({ rootAddress });\n    this.setContract(rootAddress.address);\n    this.setRegistered(newval);\n  }\n\n  onChangeRegisteredAddress(newval) {\n    this.setState({ addrToBeRegistered: newval });\n  }\n\n  async onRegister() {\n    const { addrToBeRegistered } = this.state;\n    \n    const expr = maltay.expr2h('(register! 0x\"' + addrToBeRegistered.substring(2) + '\")');\n    await this.taysend(expr);\n\n    // TODO check receipt for success;\n    this.setRegistered();\n  }\n\n  render() {\n    const {styles} = this.props;\n    const { rootAddress, addresses, registered } = this.state;\n\n    return (\n      <View style={{ ...styles, fontSize: 18}}>\n        <View style={{ ...styles, flex: 1 }}>\n          <Item style={{ width: styles.width }}>\n            <Input\n              style={{ color: 'white' }}\n              placeholder='address'\n              label='address'\n              onChangeText={this.onChangeAddress}\n            />\n          </Item>\n          <Item style={{ width: styles.width }}>\n            <Input\n              style={{ color: 'white' }}\n              placeholder='name'\n              label='name'\n              onChangeText={this.onChangeCurrentName}\n            />\n          </Item>\n          <Button small light onClick={this.onAddressSave}>\n            <Icon name='save' />\n          </Button>\n        </View>\n        <View style={{ ...styles, flex: 1 }}>\n          <Item picker>\n            <Picker\n              mode=\"dropdown\"\n              style={{ width: styles.width, backgroundColor: 'rgb(169, 169, 169)' }}\n              selectedValue={this.state.rootAddress.name}\n              onValueChange={this.onChangeRootAddress}\n            >\n              <Picker.Item label=\"select root\" value={''} />\n              {\n                Object.keys(addresses).map(name => {\n                  return <Picker.Item label={name} value={addresses[name]} key={name}/>\n                })\n              }\n            </Picker>\n          </Item>\n          <View style={{ width: styles.width, flex: 1, paddingTop: 10 }}>\n            <Text style={{ color: 'beige', fontSize: 18 }}>Root Contract</Text>\n            <br></br>\n            <Text style={{ color: 'beige', fontSize: 18 }}>{ rootAddress.name || '-' } - { rootAddress.address || '-' }</Text>\n          </View>\n          <Item picker>\n            <Picker\n              mode=\"dropdown\"\n              style={{ width: styles.width, backgroundColor: 'rgb(169, 169, 169)' }}\n              selectedValue={this.state.rootAddress.name}\n              onValueChange={this.onChangeRootAddress}\n            >\n              <Picker.Item label=\"select registered contract\" value={''} />\n              {\n                Object.keys(registered).map(name => {\n                  return <Picker.Item label={name} value={addresses[name]} key={name}/>\n                })\n              }\n            </Picker>\n          </Item>\n          <Item style={{ width: styles.width }}>\n            <Input\n              style={{ color: 'white' }}\n              placeholder='address'\n              label='address'\n              onChangeText={this.onChangeRegisteredAddress}\n            />\n          </Item>\n          <Button small light onClick={this.onRegister}>\n            <Text>register</Text>\n          </Button>\n          <View>\n              <Text></Text>\n          </View>\n        </View>\n      </View>\n    );\n  }\n}\n\nexport default MalTayContract;\n","import React, { Component } from 'react';\nimport { Dimensions, ScrollView } from 'react-native';\nimport { View, Button, Icon } from 'native-base';\nimport MonacoEditor from 'react-monaco-editor';\nimport { editorOpts } from '../utils/config.js';\nimport Out from '../components/Out.js';\nimport { getProvider } from '../utils/web3.js';\nimport MalTayContract from '../components/MalTayContract.js';\nimport * as taylorUtils from '../utils/taylor.js';\nimport maltay from 'taylor/maltay/maltay.js';\n\n\nconst MIN_WIDTH = 800;\n\nfunction getPageSize(noOfPages, {width, height}) {\n  if (width < MIN_WIDTH) return {minWidth: width, minHeight: height};\n\n  return {width: width / noOfPages, height};\n}\n\nclass TaylorEditor extends Component {\n  constructor(props) {\n    super(props);\n\n    const code =  taylorUtils.getCode();\n    const encoded = maltay.expr2h(code);\n\n    this.state = {\n      ...this.getWindowDimensions(),\n      pageNumber: 3,\n      autocompile: true,\n      code,\n      encoded,\n      result: [{data: encoded}],\n      errors: '',\n      provider: null,\n      signer: null,\n      rootAddress: null,\n      taycall: null,\n      taysend: null,\n    }\n\n    this.onContentSizeChange = this.onContentSizeChange.bind(this);\n    this.getWindowDimensions = this.getWindowDimensions.bind(this);\n    this.onTextChange = this.onTextChange.bind(this);\n    this.execute = this.execute.bind(this);\n    this.onRootChange = this.onRootChange.bind(this);\n\n    this.setWeb3();\n  }\n\n  async setWeb3() {\n    const { provider, signer } = await getProvider();\n    this.setState({ provider, signer });\n    this.onRootChange();\n  }\n\n  onRootChange(taycall, taysend) {\n    this.setState({\n        taycall,\n        taysend,\n    });\n    this.execute();\n  }\n\n  async execute({encdata, code, force=false}={}) {\n      encdata = encdata || this.state.encoded;\n      code = code || this.state.code;\n      const isTransaction = code && code.includes(\"def!\");\n      if (!isTransaction) {\n        let encoded;\n        try {\n            encoded = await this.state.taycall(encdata);\n        } catch (e) {}\n        let result;\n        try {\n            result = maltay.decode(encoded);\n        } catch(e) {}\n        this.setState({ result: [{ result, encoded, data: encdata }] });\n      } else if (force) {\n          let response, receipt = {};\n          try {\n            response = await this.state.taysend(encdata);\n            this.setState({ result: [{ receipt: response }] });\n            receipt = await response.wait();\n          } catch (e) {}\n        \n        if (receipt.status === 0) {\n            throw new Error('Transaction failed');\n        }\n        this.setState({ result: [{ receipt }] });\n\n      }\n  }\n\n  onContentSizeChange() {\n    this.setState(this.getWindowDimensions());\n  }\n\n  getWindowDimensions() {\n    let wdims = Dimensions.get('window');\n    let rootDims = document.getElementById('TaylorRoot').getBoundingClientRect();\n\n    const dims = {\n      width: wdims.width || rootDims.width,\n      height: wdims.height || rootDims.height,\n    }\n    return dims;\n  }\n\n  editorDidMount(editor, monaco) {\n    editor.focus();\n  }\n\n  onTextChange(code) {\n      try {\n        const encoded = maltay.expr2h(code);\n        this.setState({ code });\n        taylorUtils.storeCode(code);\n        this.execute({encdata: encoded, code});\n      } catch(e) {}\n  }\n\n  render() {\n    let {\n      width,\n      height,\n    } = this.state;\n    const styles = getPageSize(this.state.pageNumber, { width, height });\n\n    const editorStyles = { ...styles, width: styles.width * 2, height: styles.height * 2 / 5 }\n    const consoleStyles = { ...styles, width: styles.width * 2, height: styles.height - editorStyles.height }\n    const panelStyles = { ...styles }\n\n    const {code, result, errors, taycall, taysend} = this.state;\n\n    return (\n        <ScrollView\n            horizontal={true}\n            pagingEnabled={true}\n            scrollEnabled={true}\n            scrollEventThrottle={100}\n            nestedScrollEnabled={true}\n            contentContainerStyle={{width: \"100%\"}}\n            onContentSizeChange={this.onContentSizeChange}\n        >\n            <View style={{ ...editorStyles, flex: 1}}>\n                <MonacoEditor\n                    width={editorStyles.width}\n                    height={editorStyles.height}\n                    language=\"javascript\"\n                    theme=\"vs-dark\"\n                    value={code}\n                    options={editorOpts}\n                    onChange={this.onTextChange}\n                    editorDidMount={this.editorDidMount}\n                />\n                <Out \n                    result={result}\n                    errors={errors}\n                    styles={{ ...consoleStyles }}\n                />\n            </View>\n            <Button\n                small\n                light\n                style={{ position: 'fixed', top: '0px', left: '0px', backgroundColor: 'white',  opacity: this.state.autocompile ? 0.5 : 0.2 }}\n                onClick={() => this.execute({force: true})}\n            >\n                <Icon type=\"FontAwesome\" name='play' />\n            </Button>\n            <MalTayContract\n                taycall={taycall}\n                taysend={taysend}\n                styles={{...panelStyles}}\n                onRootChange={this.onRootChange}\n            />\n        </ScrollView>\n    );\n  }\n}\n\nexport default TaylorEditor;\n","import React from 'react';\nimport './App.css';\nimport TaylorEditor from './views/TaylorEditor.js';\n\nfunction App (props) {\n  return (<TaylorEditor />);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n// ReactDOM.render(\n//   <React.StrictMode>\n//     <App />\n//   </React.StrictMode>,\n//   document.getElementById('TaylorRoot')\n// );\n\nReactDOM.render(<App />, document.getElementById('TaylorRoot'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}